(()=>{var t={1237:t=>{t.exports={externals:[{module:"react",root:"React",dist:"react@18.2.0/umd/react.production.min.js"},{module:"react-dom",dependencies:["react"],root:"ReactDOM",dist:"react-dom@18.2.0/umd/react-dom.production.min.js"},{module:"vue",root:"Vue",dist:"vue/dist/vue.min.js"},{module:"ridgejs",root:"RidgeCore"},{module:"debug",root:"createDebug"},{module:"ridgejs-editor",root:"RidgeEditor"}]}},3401:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>n});var s=o(935),r=o.n(s)()(!1);r.push([t.id,"html, body {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n:focus-visible {\r\n  outline: none;\r\n}\r\n\r\n.ridge-composite {\r\n    position: relative;\r\n}\r\n\r\n.ridge-composite > .ridge-element {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\n.ridge-is-full {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.ridge-is-hidden {\r\n    display: none;\r\n}\r\n\r\n.ridge-element:has(.ridge-overlay) {\r\n  position: relative;\r\n}\r\n.ridge-overlay {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.status-Loading {\r\n    background: linear-gradient(90deg,#2e32380d 25%,#2e323817 44%,#2e32380d 88%);\r\n    background-size: 400% 100%;\r\n    animation: skeleton-loading 3s ease infinite;\r\n    animation-fill-mode: forwards;\r\n}\r\n\r\n\r\n.status-not-found, .status-render-error, .status-Circular, .status-Page-not-found {\r\n    position: relative;\r\n    font-size: 9px;\r\n    background-color: rgba(253, 185, 165, .3);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-position: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.status-not-found::before, .status-Circular::before, .status-Page-not-found::before {  \r\n    content: \"内容未找到\";  \r\n    position: absolute;  \r\n    padding-left: 26px;\r\n    left: 50%;\r\n    top: 50%;  \r\n    transform: translate(-50%, -50%);\r\n    font-size: 14px;  \r\n    z-index: -1;  \r\n    background-size: 22px;\r\n    background-repeat: no-repeat;\r\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' viewBox='0 0 24 24'%3E%3Cpath fill='%23e86868' d='M11.953 2C6.465 2 2 6.486 2 12s4.486 10 10 10s10-4.486 10-10S17.493 2 11.953 2M13 17h-2v-2h2zm0-4h-2V7h2z'/%3E%3C/svg%3E\");\r\n    pointer-events: none; /* 防止背景文字影响鼠标事件 */  \r\n}  \r\n\r\n.status-Circular::before {\r\n    content: \"循环渲染异常\"; \r\n}\r\n.status-Page-not-found::before {\r\n    content: \"页面未找到\";  \r\n}\r\n\r\n.ridge-composite:not(.is-edit) .is-store {\r\n    display: none;\r\n}\r\n@keyframes skeleton-loading {\r\n    0% {\r\n        background-position: 100% 50%\r\n    }\r\n\r\n    to {\r\n        background-position: 0 50%\r\n    }\r\n}",""]);const n=r},935:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=function(t,e){var o,s,r,n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var a=(o=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(r," */")),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(c).concat([a]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o})).join("")},e.i=function(t,o,s){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(s)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(r[i]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);s&&r[c[0]]||(o&&(c[2]?c[2]="".concat(o," and ").concat(c[2]):c[2]=o),e.push(c))}},e}},124:(t,e,o)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(r=s))})),e.splice(r,0,o)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=o(7891)(e);const{formatters:s}=t.exports;s.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},7891:(t,e,o)=>{t.exports=function(t){function e(t){let o,r,n,i=null;function a(...t){if(!a.enabled)return;const s=a,r=Number(new Date),n=r-(o||r);s.diff=n,s.prev=o,s.curr=r,o=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let i=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((o,r)=>{if("%%"===o)return"%";i++;const n=e.formatters[r];if("function"==typeof n){const e=t[i];o=n.call(s,e),t.splice(i,1),i--}return o})),e.formatArgs.call(s,t),(s.log||e.log).apply(s,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=s,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(r!==e.namespaces&&(r=e.namespaces,n=e.enabled(t)),n),set:t=>{i=t}}),"function"==typeof e.init&&e.init(a),a}function s(t,o){const s=e(this.namespace+(void 0===o?":":o)+t);return s.log=this.log,s}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let o;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),r=s.length;for(o=0;o<r;o++)s[o]&&("-"===(t=s[o].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let o,s;for(o=0,s=e.skips.length;o<s;o++)if(e.skips[o].test(t))return!1;for(o=0,s=e.names.length;o<s;o++)if(e.names[o].test(t))return!0;return!1},e.humanize=o(7250),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((o=>{e[o]=t[o]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let o=0;for(let e=0;e<t.length;e++)o=(o<<5)-o+t.charCodeAt(e),o|=0;return e.colors[Math.abs(o)%e.colors.length]},e.enable(e.load()),e}},4911:function(t,e){var o,s;void 0===(s="function"==typeof(o=function(){var t=function(){},e={},o={},s={};function r(t,e){if(t){var r=s[t];if(o[t]=e,r)for(;r.length;)r[0](t,e),r.splice(0,1)}}function n(e,o){e.call&&(e={success:e}),o.length?(e.error||t)(o):(e.success||t)(e)}function i(e,o,s,r){var n,a,c,l=document,h=s.async,u=(s.numRetries||0)+1,d=s.before||t,p=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img|module|nomodule)!/,"");if(r=r||0,/(^css!|\.css$)/.test(p))(c=l.createElement("link")).rel="stylesheet",c.href=f,(n="hideFocus"in c)&&c.relList&&(n=0,c.rel="preload",c.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p))(c=l.createElement("img")).src=f;else if((c=l.createElement("script")).src=f,c.async=void 0===h||h,a="noModule"in c,/^module!/.test(p)){if(!a)return o(e,"l");c.type="module"}else if(/^nomodule!/.test(p)&&a)return o(e,"l");c.onload=c.onerror=c.onbeforeload=function(t){var a=t.type[0];if(n)try{c.sheet.cssText.length||(a="e")}catch(t){18!=t.code&&(a="e")}if("e"==a){if((r+=1)<u)return i(e,o,s,r)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";o(e,a,t.defaultPrevented)},!1!==d(e,c)&&l.head.appendChild(c)}function a(t,o,s){var a,c;if(o&&o.trim&&(a=o),c=(a?s:o)||{},a){if(a in e)throw"LoadJS";e[a]=!0}function l(e,o){!function(t,e,o){var s,r,n=(t=t.push?t:[t]).length,a=n,c=[];for(s=function(t,o,s){if("e"==o&&c.push(t),"b"==o){if(!s)return;c.push(t)}--n||e(c)},r=0;r<a;r++)i(t[r],s,o)}(t,(function(t){n(c,t),e&&n({success:e,error:o},t),r(a,t)}),c)}if(c.returnPromise)return new Promise(l);l()}return a.ready=function(t,e){return function(t,e){t=t.push?t:[t];var r,n,i,a=[],c=t.length,l=c;for(r=function(t,o){o.length&&a.push(t),--l||e(a)};c--;)n=t[c],(i=o[n])?r(n,i):(s[n]=s[n]||[]).push(r)}(t,(function(t){n(e,t)})),a},a.done=function(t){r(t,[])},a.reset=function(){e={},o={},s={}},a.isDefined=function(t){return t in e},a})?o.apply(e,[]):o)||(t.exports=s)},5098:(t,e,o)=>{var s=o(3305),r=o(9361),n=o(1112),i=o(5276),a=o(7452);function c(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var s=t[e];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=r,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},1386:(t,e,o)=>{var s=o(2393),r=o(2049),n=o(7144),i=o(5071),a=o(3964);function c(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var s=t[e];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=r,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},9770:(t,e,o)=>{var s=o(4715)(o(8942),"Map");t.exports=s},8250:(t,e,o)=>{var s=o(9753),r=o(5681),n=o(88),i=o(4732),a=o(9068);function c(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var s=t[e];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=r,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},5650:(t,e,o)=>{var s=o(8942).Symbol;t.exports=s},5111:t=>{t.exports=function(t,e){for(var o=-1,s=null==t?0:t.length,r=Array(s);++o<s;)r[o]=e(t[o],o,t);return r}},4187:t=>{t.exports=function(t,e,o,s){var r=-1,n=null==t?0:t.length;for(s&&n&&(o=t[++r]);++r<n;)o=e(o,t[r],r,t);return o}},2837:t=>{t.exports=function(t){return t.split("")}},9546:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},3422:(t,e,o)=>{var s=o(7073),r=o(6285),n=Object.prototype.hasOwnProperty;t.exports=function(t,e,o){var i=t[e];n.call(t,e)&&r(i,o)&&(void 0!==o||e in t)||s(t,e,o)}},7034:(t,e,o)=>{var s=o(6285);t.exports=function(t,e){for(var o=t.length;o--;)if(s(t[o][0],e))return o;return-1}},7073:(t,e,o)=>{var s=o(2532);t.exports=function(t,e,o){"__proto__"==e&&s?s(t,e,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[e]=o}},4869:t=>{t.exports=function(t,e,o,s){for(var r=t.length,n=o+(s?1:-1);s?n--:++n<r;)if(e(t[n],n,t))return n;return-1}},7923:(t,e,o)=>{var s=o(3526),r=o(6040);t.exports=function(t,e){for(var o=0,n=(e=s(e,t)).length;null!=t&&o<n;)t=t[r(e[o++])];return o&&o==n?t:void 0}},7379:(t,e,o)=>{var s=o(5650),r=o(8870),n=o(9005),i=s?s.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?r(t):n(t)}},2478:(t,e,o)=>{var s=o(4869),r=o(9454),n=o(7706);t.exports=function(t,e,o){return e==e?n(t,e,o):s(t,r,o)}},9454:t=>{t.exports=function(t){return t!=t}},9624:(t,e,o)=>{var s=o(3655),r=o(4759),n=o(1580),i=o(4066),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,h=c.toString,u=l.hasOwnProperty,d=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!n(t)||r(t))&&(s(t)?d:a).test(i(t))}},1035:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},7655:(t,e,o)=>{var s=o(3422),r=o(3526),n=o(9632),i=o(1580),a=o(6040);t.exports=function(t,e,o,c){if(!i(t))return t;for(var l=-1,h=(e=r(e,t)).length,u=h-1,d=t;null!=d&&++l<h;){var p=a(e[l]),f=o;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(l!=u){var m=d[p];void 0===(f=c?c(m,p,d):void 0)&&(f=i(m)?m:n(e[l+1])?[]:{})}s(d,p,f),d=d[p]}return t}},3501:t=>{t.exports=function(t,e,o){var s=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(o=o>r?r:o)<0&&(o+=r),r=e>o?0:o-e>>>0,e>>>=0;for(var n=Array(r);++s<r;)n[s]=t[s+e];return n}},2291:(t,e,o)=>{var s=o(5650),r=o(5111),n=o(3142),i=o(1187),a=s?s.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(n(e))return r(e,t)+"";if(i(e))return c?c.call(e):"";var o=e+"";return"0"==o&&1/e==-1/0?"-0":o}},6403:(t,e,o)=>{var s=o(2945),r=/^\s+/;t.exports=function(t){return t?t.slice(0,s(t)+1).replace(r,""):t}},3526:(t,e,o)=>{var s=o(3142),r=o(5187),n=o(6493),i=o(5243);t.exports=function(t,e){return s(t)?t:r(t,e)?[t]:n(i(t))}},8931:(t,e,o)=>{var s=o(3501);t.exports=function(t,e,o){var r=t.length;return o=void 0===o?r:o,!e&&o>=r?t:s(t,e,o)}},8774:(t,e,o)=>{var s=o(2478);t.exports=function(t,e){for(var o=t.length;o--&&s(e,t[o],0)>-1;);return o}},7905:(t,e,o)=>{var s=o(2478);t.exports=function(t,e){for(var o=-1,r=t.length;++o<r&&s(e,t[o],0)>-1;);return o}},1950:(t,e,o)=>{var s=o(8942)["__core-js_shared__"];t.exports=s},4326:(t,e,o)=>{var s=o(8931),r=o(3417),n=o(2237),i=o(5243);t.exports=function(t){return function(e){e=i(e);var o=r(e)?n(e):void 0,a=o?o[0]:e.charAt(0),c=o?s(o,1).join(""):e.slice(1);return a[t]()+c}}},3640:(t,e,o)=>{var s=o(4187),r=o(5881),n=o(9850),i=RegExp("['’]","g");t.exports=function(t){return function(e){return s(n(r(e).replace(i,"")),t,"")}}},9968:(t,e,o)=>{var s=o(1035)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=s},2532:(t,e,o)=>{var s=o(4715),r=function(){try{var t=s(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},4967:(t,e,o)=>{var s="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;t.exports=s},4700:(t,e,o)=>{var s=o(9067);t.exports=function(t,e){var o=t.__data__;return s(e)?o["string"==typeof e?"string":"hash"]:o.map}},4715:(t,e,o)=>{var s=o(9624),r=o(155);t.exports=function(t,e){var o=r(t,e);return s(o)?o:void 0}},8870:(t,e,o)=>{var s=o(5650),r=Object.prototype,n=r.hasOwnProperty,i=r.toString,a=s?s.toStringTag:void 0;t.exports=function(t){var e=n.call(t,a),o=t[a];try{t[a]=void 0;var s=!0}catch(t){}var r=i.call(t);return s&&(e?t[a]=o:delete t[a]),r}},155:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},3417:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},5813:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},3305:(t,e,o)=>{var s=o(4497);t.exports=function(){this.__data__=s?s(null):{},this.size=0}},9361:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},1112:(t,e,o)=>{var s=o(4497),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(s){var o=e[t];return"__lodash_hash_undefined__"===o?void 0:o}return r.call(e,t)?e[t]:void 0}},5276:(t,e,o)=>{var s=o(4497),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return s?void 0!==e[t]:r.call(e,t)}},7452:(t,e,o)=>{var s=o(4497);t.exports=function(t,e){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=s&&void 0===e?"__lodash_hash_undefined__":e,this}},9632:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,o){var s=typeof t;return!!(o=null==o?9007199254740991:o)&&("number"==s||"symbol"!=s&&e.test(t))&&t>-1&&t%1==0&&t<o}},5187:(t,e,o)=>{var s=o(3142),r=o(1187),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(s(t))return!1;var o=typeof t;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=t&&!r(t))||i.test(t)||!n.test(t)||null!=e&&t in Object(e)}},9067:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},4759:(t,e,o)=>{var s,r=o(1950),n=(s=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";t.exports=function(t){return!!n&&n in t}},2393:t=>{t.exports=function(){this.__data__=[],this.size=0}},2049:(t,e,o)=>{var s=o(7034),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,o=s(e,t);return!(o<0||(o==e.length-1?e.pop():r.call(e,o,1),--this.size,0))}},7144:(t,e,o)=>{var s=o(7034);t.exports=function(t){var e=this.__data__,o=s(e,t);return o<0?void 0:e[o][1]}},5071:(t,e,o)=>{var s=o(7034);t.exports=function(t){return s(this.__data__,t)>-1}},3964:(t,e,o)=>{var s=o(7034);t.exports=function(t,e){var o=this.__data__,r=s(o,t);return r<0?(++this.size,o.push([t,e])):o[r][1]=e,this}},9753:(t,e,o)=>{var s=o(5098),r=o(1386),n=o(9770);t.exports=function(){this.size=0,this.__data__={hash:new s,map:new(n||r),string:new s}}},5681:(t,e,o)=>{var s=o(4700);t.exports=function(t){var e=s(this,t).delete(t);return this.size-=e?1:0,e}},88:(t,e,o)=>{var s=o(4700);t.exports=function(t){return s(this,t).get(t)}},4732:(t,e,o)=>{var s=o(4700);t.exports=function(t){return s(this,t).has(t)}},9068:(t,e,o)=>{var s=o(4700);t.exports=function(t,e){var o=s(this,t),r=o.size;return o.set(t,e),this.size+=o.size==r?0:1,this}},6853:(t,e,o)=>{var s=o(9011);t.exports=function(t){var e=s(t,(function(t){return 500===o.size&&o.clear(),t})),o=e.cache;return e}},4497:(t,e,o)=>{var s=o(4715)(Object,"create");t.exports=s},9005:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},8942:(t,e,o)=>{var s=o(4967),r="object"==typeof self&&self&&self.Object===Object&&self,n=s||r||Function("return this")();t.exports=n},7706:t=>{t.exports=function(t,e,o){for(var s=o-1,r=t.length;++s<r;)if(t[s]===e)return s;return-1}},2237:(t,e,o)=>{var s=o(2837),r=o(3417),n=o(2013);t.exports=function(t){return r(t)?n(t):s(t)}},6493:(t,e,o)=>{var s=o(6853),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=s((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,o,s,r){e.push(s?r.replace(n,"$1"):o||t)})),e}));t.exports=i},6040:(t,e,o)=>{var s=o(1187);t.exports=function(t){if("string"==typeof t||s(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},4066:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},2945:t=>{var e=/\s/;t.exports=function(t){for(var o=t.length;o--&&e.test(t.charAt(o)););return o}},2013:t=>{var e="\\ud800-\\udfff",o="["+e+"]",s="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",n="[^"+e+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+s+"|"+r+")?",l="[\\ufe0e\\ufe0f]?",h=l+c+"(?:\\u200d(?:"+[n,i,a].join("|")+")"+l+c+")*",u="(?:"+[n+s+"?",s,i,a,o].join("|")+")",d=RegExp(r+"(?="+r+")|"+u+h,"g");t.exports=function(t){return t.match(d)||[]}},482:t=>{var e="\\ud800-\\udfff",o="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+n+"]",a="\\d+",c="["+o+"]",l="["+s+"]",h="[^"+e+n+a+o+s+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+r+"]",f="(?:"+l+"|"+h+")",m="(?:"+p+"|"+h+")",g="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",w=b+v+"(?:\\u200d(?:"+["[^"+e+"]",u,d].join("|")+")"+b+v+")*",x="(?:"+[c,u,d].join("|")+")"+w,C=RegExp([p+"?"+l+"+"+g+"(?="+[i,p,"$"].join("|")+")",m+"+"+y+"(?="+[i,p+f,"$"].join("|")+")",p+"?"+f+"+"+g,p+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,x].join("|"),"g");t.exports=function(t){return t.match(C)||[]}},9677:(t,e,o)=>{var s=o(6005),r=o(3640)((function(t,e,o){return e=e.toLowerCase(),t+(o?s(e):e)}));t.exports=r},6005:(t,e,o)=>{var s=o(5243),r=o(5485);t.exports=function(t){return r(s(t).toLowerCase())}},5881:(t,e,o)=>{var s=o(9968),r=o(5243),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=r(t))&&t.replace(n,s).replace(i,"")}},6285:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6123:(t,e,o)=>{var s=o(7923);t.exports=function(t,e,o){var r=null==t?void 0:s(t,e);return void 0===r?o:r}},3142:t=>{var e=Array.isArray;t.exports=e},3655:(t,e,o)=>{var s=o(7379),r=o(1580);t.exports=function(t){if(!r(t))return!1;var e=s(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1580:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},547:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},1187:(t,e,o)=>{var s=o(7379),r=o(547);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==s(t)}},9011:(t,e,o)=>{var s=o(8250);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var o=function(){var s=arguments,r=e?e.apply(this,s):s[0],n=o.cache;if(n.has(r))return n.get(r);var i=t.apply(this,s);return o.cache=n.set(r,i)||n,i};return o.cache=new(r.Cache||s),o}r.Cache=s,t.exports=r},1263:(t,e,o)=>{var s=o(7655);t.exports=function(t,e,o){return null==t?t:s(t,e,o)}},5243:(t,e,o)=>{var s=o(2291);t.exports=function(t){return null==t?"":s(t)}},107:(t,e,o)=>{var s=o(2291),r=o(6403),n=o(8931),i=o(8774),a=o(7905),c=o(2237),l=o(5243);t.exports=function(t,e,o){if((t=l(t))&&(o||void 0===e))return r(t);if(!t||!(e=s(e)))return t;var h=c(t),u=c(e),d=a(h,u),p=i(h,u)+1;return n(h,d,p).join("")}},5485:(t,e,o)=>{var s=o(4326)("toUpperCase");t.exports=s},9850:(t,e,o)=>{var s=o(9546),r=o(5813),n=o(5243),i=o(482);t.exports=function(t,e,o){return t=n(t),void 0===(e=o?void 0:e)?r(t)?i(t):s(t):t.match(e)||[]}},7250:t=>{var e=1e3,o=60*e,s=60*o,r=24*s,n=7*r;function i(t,e,o,s){var r=e>=1.5*o;return Math.round(t/o)+" "+s+(r?"s":"")}t.exports=function(t,a){a=a||{};var c,l,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*o;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===h&&isFinite(t))return a.long?(c=t,(l=Math.abs(c))>=r?i(c,l,r,"day"):l>=s?i(c,l,s,"hour"):l>=o?i(c,l,o,"minute"):l>=e?i(c,l,e,"second"):c+" ms"):function(t){var n=Math.abs(t);return n>=r?Math.round(t/r)+"d":n>=s?Math.round(t/s)+"h":n>=o?Math.round(t/o)+"m":n>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},4699:(t,e,o)=>{var s=o(2591),r=o(3401);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);s(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},2591:(t,e,o)=>{"use strict";var s,r=function(){var t={};return function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}t[e]=o}return t[e]}}(),n=[];function i(t){for(var e=-1,o=0;o<n.length;o++)if(n[o].identifier===t){e=o;break}return e}function a(t,e){for(var o={},s=[],r=0;r<t.length;r++){var a=t[r],c=e.base?a[0]+e.base:a[0],l=o[c]||0,h="".concat(c," ").concat(l);o[c]=l+1;var u=i(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(n[u].references++,n[u].updater(d)):n.push({identifier:h,updater:m(d,e),references:1}),s.push(h)}return s}function c(t){var e=document.createElement("style"),s=t.attributes||{};if(void 0===s.nonce){var n=o.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(t){e.setAttribute(t,s[t])})),"function"==typeof t.insert)t.insert(e);else{var i=r(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var l,h=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function u(t,e,o,s){var r=o?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(t.styleSheet)t.styleSheet.cssText=h(e,r);else{var n=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(n,i[e]):t.appendChild(n)}}function d(t,e,o){var s=o.css,r=o.media,n=o.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var p=null,f=0;function m(t,e){var o,s,r;if(e.singleton){var n=f++;o=p||(p=c(e)),s=u.bind(null,o,n,!1),r=u.bind(null,o,n,!0)}else o=c(e),s=d.bind(null,o,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(o)};return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var o=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var s=0;s<o.length;s++){var r=i(o[s]);n[r].references--}for(var c=a(t,e),l=0;l<o.length;l++){var h=i(o[l]);0===n[h].references&&(n[h].updater(),n.splice(h,1))}o=c}}}}},e={};function o(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={id:s,exports:{}};return t[s].call(n.exports,n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nc=void 0,(()=>{"use strict";o(4699);var t=o(124),e=o.n(t),s=o(4911),r=o.n(s),n=o(9011),i=o.n(n),a=o(1237),c=o.n(a);let l=t=>crypto.getRandomValues(new Uint8Array(t));o(9677),o(107);const h=((t,e=21)=>((t,e,o)=>{let s=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*s*e/t.length);return(n=e)=>{let i="";for(;;){let e=o(r),a=r;for(;a--;)if(i+=t[e[a]&s]||"",i.length===n)return i}}})("1234567890abcdefghijklmnopqrstuvwxyz",e,l))(0,10),u=async t=>{const e=document.createElement("script"),o="ridge-store-"+h(10),{updatedSourceCode:s,importStatements:r}=(t=>{const e=[];let o=t;const s=/import\s+.*?\s+from\s+(['"])(.*?)(['"])/gm;let r;for(;r=s.exec(t);){const t=r[2];e.push(t),o=o.replace(r[0],"")}return{updatedSourceCode:o,importStatements:e}})(t);return e.textContent=s.replace("export default",'window["'+o+'"]='),new Promise(((t,n)=>{try{window.onerror=t=>{try{document.head.removeChild(e),n(t)}catch(t){}},document.head.append(e);const i=window[o];i.jsContent=s,i.dependencies=r,i?t(i):n(new Error("not"))}catch(t){n(t)}finally{delete window[o],window.onerror=null,document.head.removeChild(e)}}))},d=e()("ridge:loader"),p=class{constructor({baseUrl:t,loadPropControl:e}){this.baseUrl=t.replace(/\/$/,""),this.loadPropControl=e,d("RidgeLoader baseUrl: "+this.baseUrl),this.loadedFonts=[],this.themeUrls={},this.getPackageJSON=i()(this._getPackageJSON),this.loadComponent=i()(this._loadComponent),this.loadScript=i()(this._loadScript),this.loadExternal=i()(this._loadExternal),this.loadJSON=i()(this.loadJSON),this.loadStoreScript=i()(this.loadStoreScript),this.loadJsModule=u,this.confirmPackageDependencies=i()(this._confirmPackageDependencies)}getComponentUrl({packageName:t,path:e}){return`${this.baseUrl}/${t}/${e}`}getPackageJSONUrl(t){return`${this.baseUrl}/${t}/package.json`}async _loadComponent(t){let e,o;if("object"==typeof t)e=t.packageName,o=t.path;else{const s=t.split("/");s[0].startsWith("@")?(e=s.splice(0,2).join("/"),o=s.join("/")):(e=s.splice(0,1).join("/"),o=s.join("/"))}const s=await this.doLoadComponent({packageName:e,path:o});return s&&(s.componentPath=t),s}async doLoadComponent({packageName:t,path:e}){d("doLoadComponent",t,e);const o=await this.getPackageJSON(t);if(null==o)return null;await this.confirmPackageDependencies(t);let s=null;return o.ridgeDist?(await this.loadScript(`${o.name}/${o.ridgeDist}`),s=window[o.name][e]):s=await this.loadComponentScript({packageName:t,path:e}),s&&await this.prepareComponent(s,{packageName:t,path:e},o),s}async prepareComponent(t,{packageName:e,path:o}){if(t.packageName=e,t.path=o,t.title=t.title||t.label,Array.isArray(t.externals))for(const o of t.externals)o.startsWith("/")?await this.loadScript(o):await this.loadScript(e+"/"+o);if(t.component){if("function"==typeof t.component&&"AsyncFunction"===t.component.constructor.name&&(t.component=(await t.component()).default),this.loadPropControl)for(const e of t.props||[])e.control&&"function"==typeof e.control&&e.control.toString().startsWith("()")&&(e.controlComponent=(await e.control()).default),e.options&&"function"==typeof e.options&&e.options.toString().startsWith("()")&&(e.optionsLoads=await e.options())}else d("组件 Component定义未加载到",t)}on(t,e){this.eventCallbacks.push({eventName:t,callback:e})}async loadComponentScript({packageName:t,path:e}){await this.loadScript(`${t}/build/${e}.js`);const o=`${t}/${e}`;return window[o]?window[o].default:null}removeCss(t){if(!t)return;const e=Array.from(document.head.children).filter((t=>"link"===t.tagName.toLowerCase()));for(const o of e)o.href.endsWith(t)&&document.head.removeChild(o)}async loadCss(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("HEAD")[0].appendChild(e)}getFinalCDNUrl(t){let e=t.replace(/\/\//g,"/");e.startsWith("/")||(e="/"+e),e=this.baseUrl+e,e.startsWith("/")||e.indexOf("")}async _loadScript(t){if(null!=t)try{let e=t.replace(/\/\//g,"/");if(e.startsWith("/")||(e="/"+e),Array.from(document.querySelectorAll("script")).find((t=>t.src&&t.src.endsWith(e)))||Array.from(document.querySelectorAll("link")).find((t=>t.href&&t.href.endsWith(e))))return d("Script loaded: ",e),e;const o=this.baseUrl+e;return d("_loadScript:"+o),await r()(o,{returnPromise:!0,before:function(t,e){e.crossOrigin=!0}}),e}catch(e){console.error("JS Load Error:",`${t}`)}}async _getPackageJSON(t){d("getPackageJSON",t);const e=this.getPackageJSONUrl(t);try{return await this.fetchJSON(e)}catch(t){return d("NPM Package Not Loaded:",e),null}}async _confirmPackageDependencies(t){d("_confirmPackageDependencies",t);const e=await this.getPackageJSON(t);if(null==e)return;const o=Object.keys(e.dependencies||{});for(const t of o)await this.loadExternal(t);const s=e.externals||e.prepares,r=[];if(Array.isArray(s))for(const t of s)t.startsWith("/")?r.push(await this.loadScript(t)):r.push(await this.loadScript(e.name+"/"+t));await Promise.allSettled(r),e.themes&&(window.ridgeTheme&&window.ridgeTheme[t]&&e.themes[window.ridgeTheme[t]]?this.loadPackageTheme(t,e.themes[window.ridgeTheme[t]]):this.loadPackageTheme(t,e.themes.default))}async loadPackageTheme(t,e){this.themeUrls[t]&&this.removeCss(this.themeUrls[t]),this.loadCss(this.baseUrl+"/"+e),this.themeUrls[t]=e}async _loadExternal(t){d("_loadExternal",t);const e=c().externals.filter((e=>e.module===t))[0];if(e){if(d("Found External Package",e),e.root&&window[e.root])return;if(e.dependencies)for(const t of e.dependencies)await this.loadExternal(t);if(Array.isArray(e.dist)){const t=[];for(const o of e.dist)t.push(this.loadScript(o));await Promise.allSettled(t)}else"string"==typeof e.dist&&await this.loadScript(e.dist)}}async loadStoreScript(t){return(async t=>{try{const e=await window.fetch(t),o=await e.text();return u(o)}catch(t){return null}})(t)}async fetchJSON(t){try{const e=await window.fetch(t);return e.ok?await e.json():null}catch(t){return null}}async loadJSON(t){return this.fetchJSON(`${this.baseUrl}/${t.replace(/\/\//g,"/")}`)}},f=(Symbol(),Symbol()),m=Object.getPrototypeOf,g=new WeakMap,y=(t,e=!0)=>{g.set(t,e)},v=t=>"object"==typeof t&&null!==t,b=new WeakMap,w=new WeakSet,[x]=((t=Object.is,e=((t,e)=>new Proxy(t,e)),o=(t=>v(t)&&!w.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)),s=(t=>{switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t}}),r=new WeakMap,n=((t,e,o=s)=>{const i=r.get(t);if((null==i?void 0:i[0])===e)return i[1];const a=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return y(a,!0),r.set(t,[e,a]),Reflect.ownKeys(t).forEach((e=>{if(Object.getOwnPropertyDescriptor(a,e))return;const s=Reflect.get(t,e),{enumerable:r}=Reflect.getOwnPropertyDescriptor(t,e),i={value:s,enumerable:r,configurable:!0};if(w.has(s))y(s,!1);else if(s instanceof Promise)delete i.value,i.get=()=>o(s);else if(b.has(s)){const[t,e]=b.get(s);i.value=n(t,e(),o)}Object.defineProperty(a,e,i)})),Object.preventExtensions(a)}),i=new WeakMap,a=[1,1],c=(s=>{if(!v(s))throw new Error("object required");const r=i.get(s);if(r)return r;let l=a[0];const h=new Set,u=(t,e=++a[0])=>{l!==e&&(l=e,h.forEach((o=>o(t,e))))};let d=a[1];const p=t=>(e,o)=>{const s=[...e];s[1]=[t,...s[1]],u(s,o)},y=new Map,x=t=>{var e;const o=y.get(t);o&&(y.delete(t),null==(e=o[1])||e.call(o))},C=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s)),S=e(C,{deleteProperty(t,e){const o=Reflect.get(t,e);x(e);const s=Reflect.deleteProperty(t,e);return s&&u(["delete",[e],o]),s},set(e,s,r,n){const a=Reflect.has(e,s),l=Reflect.get(e,s,n);if(a&&(t(l,r)||i.has(r)&&t(l,i.get(r))))return!0;var d;x(s),v(r)&&(r=(t=>t&&(g.has(t)?g.get(t):m(t)===Object.prototype||m(t)===Array.prototype))(d=r)&&d[f]||null||r);let C=r;if(r instanceof Promise)r.then((t=>{r.status="fulfilled",r.value=t,u(["resolve",[s],t])})).catch((t=>{r.status="rejected",r.reason=t,u(["reject",[s],t])}));else{!b.has(r)&&o(r)&&(C=c(r));const t=!w.has(C)&&b.get(C);t&&((t,e)=>{if(y.has(t))throw new Error("prop listener already exists");if(h.size){const o=e[3](p(t));y.set(t,[e,o])}else y.set(t,[e])})(s,t)}return Reflect.set(e,s,C,n),u(["set",[s],r,l]),!0}});i.set(s,S);const P=[C,(t=++a[1])=>(d===t||h.size||(d=t,y.forEach((([e])=>{const o=e[1](t);o>l&&(l=o)}))),l),n,t=>(h.add(t),1===h.size&&y.forEach((([t,e],o)=>{if(e)throw new Error("remove already exists");const s=t[3](p(o));y.set(o,[t,s])})),()=>{h.delete(t),0===h.size&&y.forEach((([t,e],o)=>{e&&(e(),y.set(o,[t]))}))})];return b.set(S,P),Reflect.ownKeys(s).forEach((t=>{const e=Object.getOwnPropertyDescriptor(s,t);"value"in e&&(S[t]=s[t],delete e.value,delete e.writable),Object.defineProperty(C,t,e)})),S}))=>[c,b,w,t,e,o,s,r,n,i,a])();function C(t={}){return x(t)}var S=o(1263),P=o.n(S),j=o(6123),O=o.n(j);const E=e()("ridge:store"),k=e()("ridge:store-error"),_=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return t}};class R{constructor(t,e){this.module=t,this.composite=e,this.watchers={"*":new Set},this.computedDependencies={},this.state={},this.globals={},this.externalModules={},this.context=new Proxy(this,{get:function(t,e){switch(e){case"composite":return t.composite;case"emit":return(e,o)=>{t.composite.emit(e,_(o))};case"setState":return e=>{Object.assign(t.state,e)};case"properties":return t.properties;case"state":return t.state;case"scope":return;default:if(void 0!==t.state[e])return t.computedUsedState&&t.computedUsedState.push(e),t.state[e];if(t.module.actions&&t.module.actions[e])return t.module.actions[e];if(t.module.computed&&t.module.computed[e]){if("function"==typeof t.module.computed[e])return t.module.computed[e].call(t.context);if("function"==typeof t.module.computed[e].get)return t.module.computed[e].get.call(t.context)}else{if(t.globals[e])return t.globals[e];if(t.externalModules[e])return t.externalModules[e];if(window[e])return window[e]}}},set:function(t,e,o){return void 0!==t.state[e]?t.state[e]=o:t.globals[e]=o,!0}}),this.scheduledJobs=new Set}async initStore(t,o){if(this.properties=t,this.globalVariables=o,this.module.externals)for(const t of Object.keys(this.module.externals))await this.composite.context.loadScript(this.module.externals[t]),this.externalModules[t]=window[t];for(const t of this.module.properties||[])null==this.properties[t.name]&&null!=t.value&&(this.properties[t.name]=t.value);if("function"==typeof this.module.state)try{this.state=C(await this.module.state(t))}catch(t){console.error("initStore Error",t)}else"object"==typeof this.module.state?this.state=C(_(this.module.state)):this.state={};if(this.state&&function(t,e,o){const s=b.get(t);let r;s||console.warn("Please use proxy object");const n=[],i=s[3];let a=!1;i((t=>{n.push(t),r||(r=Promise.resolve().then((()=>{r=void 0,a&&e(n.splice(0))})))}));a=!0}(this.state,(t=>{this.onMutations(t)})),this.module.setup)try{const t=await async function(t,e){if(!e)return await t(),-1;const o=performance.now();return await t(),performance.now()-o}((async()=>{await this.module.setup.call(this.context,this.context)}),e().enabled);t>-1&&e()("Module Setup:",this.module.name,"Duration:",t+"ms"),this.storeSetUp=!0,this.flushScheduledJobs()}catch(t){console.error("Module Setup Error!",this.module,t)}}updateProps(t){this.properties=t;const e=[];for(const o in t)this.watchers[o]&&e.push(...this.watchers[o]),this.module.watch&&this.module.watch[o]&&this.module.watch[o].call(this.context,t[o],t);this.scheduleCallback(e),this.module.update&&this.module.update.call(this.context,t),this.flushScheduledJobs()}subscribe(t,e,o){const s=e.join(".");switch(t){case"state":case"prop":this.addWatchers(s,o);break;case"computed":if(this.module.computed&&this.module.computed[s])if(Array.isArray(this.module.computed[s].dependencies))for(const t of this.module.computed[s].dependencies)this.addWatchers(t,o);else this.addWatchers(s,o)}}addWatchers(t,e){null==this.watchers[t]&&(this.watchers[t]=new Set),this.watchers[t].add(e)}getValue(t,e,o){let s=null;if("state"===t)s=O()(this.state,e);else if("computed"===t){const t=[...o];t.push(function(t,e){const o=b.get(t);o||console.warn("Please use proxy object");const[s,r,n]=o;return n(s,r(),void 0)}(this.context.state));const r=this.module.computed[e];if(r){this.computedUsedState=[];try{"function"==typeof r?s=r.call(this.context,...t):"function"==typeof r.get&&(s=r.get.call(this.context,...t)),this.computedDependencies[e]?this.computedDependencies[e]=Array.from(new Set([...this.computedDependencies[e],...this.computedUsedState])):this.computedDependencies[e]=this.computedUsedState}catch(t){console.error("getValue Error",t),this.storeSetUp&&console.error("ComputedError: ",r,o)}}}else if("prop"===t)return this.context.properties[e];return null!=s&&(s=_(s)),s}dispatchChange(t,e,o,s){if("state"===t)P()(this.state,e.split("."),o);else if("computed"===t&&this.module.computed&&"function"==typeof this.module.computed[e]?.set)try{this.module.computed[e]?.set.call(this.context,o,this.state,...s)}catch(t){k("dispatchChange Error",t)}}doStoreAction(t,{scopedData:o,payload:s,eventArgs:r}){if(this.module.actions&&this.module.actions[t])try{const n=[];""!==r&&n.push(r),n.push(...s),o&&o.length&&n.push(...o);const i=function(t,e){if(!e)return t(),-1;const o=performance.now();return t(),performance.now()-o}((()=>{const e=this.module.actions[t].call(this.context,...n);"object"==typeof e&&this.context.setState(e)}),e().enabled);i>-1&&e()("Action Dura",t,n,i)}catch(t){console.error("doStoreAction Error",t)}}onMutations(t){for(const e of t){const[t,o,s,r]=e;E("mutation",t,o.join("."),s,r),this.onStateChange(o,s,r)}this.flushScheduledJobs()}onStateChange(t,e,o){t.join(".");const s=[],r=new Set;let n="";for(let e=0;e<t.length;e++){n=t.slice(0,e+1).join("."),this.watchers[n]&&s.push(...this.watchers[n]);for(const t in this.computedDependencies)this.computedDependencies[t].indexOf(n)>-1&&s.push(...this.watchers[t]??[]);if(this.module.watch&&this.module.watch[n]){const t=this.module.watch[n];r.add(t)}}s.push(...Array.from(r).map((t=>()=>{t.call(this.context,o)}))),this.scheduleCallback(s)}scheduleCallback(t){for(const e of t)this.scheduledJobs.add(e)}flushScheduledJobs(){for(const t of this.scheduledJobs)try{t()}catch(t){console.error("job exec error",t)}this.scheduledJobs.clear()}destory(){this.module.destory&&this.module.destory.call(this.context)}}const N="Promote",A="props",F=e()("ridge:store");e()("ridge:store-error");class U{constructor(t){this.composite=t,this.properties=t.properties,this.storeObjects={}}setProperties(t){this.properties=t;for(const e of Object.values(this.storeObjects))e.updateProps(t)}load(t,e){for(const o of Array.isArray(t)?t:[t])this.registerPageStore(o,e)}getStoreValue(t,e){const[o,s,...r]=t.split(".");return o===N&&s===A?this.properties[r[0]]:this.storeObjects[o]?this.storeObjects[o].getValue(s,r.join("."),e):void 0}subscribe(t,e){if(t)try{const[o,s,...r]=t.split(".");F("subscribe",t),this.storeObjects[o]&&this.storeObjects[o].subscribe(s,r,e)}catch(e){console.error("subscribe error",t,e)}}dispatchChange(t,e,o){const[s,r,...n]=t.split(".");this.storeObjects[s]&&this.storeObjects[s].dispatchChange(r,n.join("."),e,o)}doStoreAction(t,e,o){this.storeObjects[t]&&this.storeObjects[t].doStoreAction(e,o)}registerPageStore(t,e){if(F("RegisterPageStore",t),!t.name)return void F("Store Not Registered: No Name");const o=t.name;this.storeObjects[o]=new R(t,this.composite),this.storeObjects[o].initStore(e)}destory(){for(const t of Object.values(this.storeObjects))t.destory()}}class D{async mount(){}setOption(t){}updateProps(t){}layout(t){}invoke(t,e){}on(t,e){}destroy(){}}class M extends D{constructor(t,e={}){super(),this.JSXComponent=t,this.props=e,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref}mount(t){this.el=t,this.root=ReactDOM.createRoot(t),this.root.render(this.getRenderInstance())}getRenderInstance(){return React.createElement(this.JSXComponent,this.props)}on(t,e){Object.assign(this.props,{[t]:e}),this.root.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(t,e){if(this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t])return this.renderRef.current[t](...e||[])}hasMethod(t){return this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t]}setOption(t){this.updateProps(t)}updateProps(t){this.props=Object.assign({},t,{ref:this.props.ref}),this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps&&this.renderRef.current.updateProps(t),this.root.render(this.getRenderInstance())}layout(t){ReactDOM.render(React.createElement(this.JSXComponent,t),this.el)}destroy(){this.root.unmount(),this.renderRef&&(this.renderRef=null)}}class L extends D{constructor(t,e={}){super(),this.VannilaComponent=t,this.props=e}mount(t){this.el=t,this.getRenderInstance().mount(t)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(t,e){this.instance.on(t,e)}invoke(t,e){if(this.getRenderInstance()[t])return this.getRenderInstance()[t].apply(this.getRenderInstance(),e)}hasMethod(t){return null!=this.getRenderInstance()[t]}setOption(t){this.updateProps(t)}updateProps(t){this.getRenderInstance().update(t)}layout(){this.getRenderInstance().layout()}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}const I=t=>({scope:e}={})=>{class o extends React.Component{constructor(t){super(t),this.scope=t.scope,this.ref=React.createRef(),this.ridgeElement=null}componentDidMount(){this.props.scope?this.ridgeElement?(this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.forceUpdate()):(this.ridgeElement=this.props.element.clone(),this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.mount(this.ref.current)):(this.ridgeElement=this.props.element,this.ridgeElement.el&&this.ridgeElement.unmount(),this.ridgeElement.mount(this.ref.current))}componentWillUnmount(){this.ridgeElement.unmount()}render(){return React.createElement("div",{ref:this.ref,style:{width:"100%",height:"100%"}})}}return React.createElement(o,{element:t,scope:e})},J=class{async load(){}async mount(t){}setProperties(t){}unmount(){}invoke(){}setStatus(t,e){this.status=t,this.el&&this.el.classList.add("status-"+t)}getStatus(){return this.status}removeStatus(t){if(this.status=null,this.el)for(const e of this.el.classList)t?e==="status-"+t&&this.el.classList.remove(e):e.startsWith("status-")&&this.el.classList.remove(e)}},z=e()("ridge:element");class $ extends J{constructor({config:t,composite:e,componentDefinition:o}){super(),this.config=t,this.uuid="ins-"+h(8),this.composite=e,this.componentDefinition=o,this.properties={},this.events={},z("create",this.config.id)}getId(){return this.config.id}getProperties(){return Object.assign({width:this.style.width,height:this.style.height,__composite:this.composite,visible:this.style.visible},this.config.props,this.events,this.properties,{children:this.children})}getConfig(){return this.config}getEl(){return this.el}getParent(){return this.parent}getScopedData(){const t=this.getParent(),e=t?t.getScopedData():[];return null==this.scopedData?e:[this.scopedData,...e]}setScopedData(t){this.scopedData=t}async load(t){if(this.componentDefinition||this.config.path&&(this.componentDefinition=await this.composite.context.loader.loadComponent(this.config.path)),this.componentDefinition){if(t&&this.config.props.children)for(const t of this.config.props.children){const e=this.composite.getNode(t);e&&await e.load(!0)}return!0}return this.setStatus("not-found"),!1}firstPaint(t){t&&(this.el=t),z("el first paint",this.config.title,this),this.firstPainted=!0,this.setStatus("Loading"),this.el.setAttribute("ridge-title",this.config.title),this.el.setAttribute("ridge-mount","mounting"),this.style=Object.assign({},this.config.style),this.updateStyle()}async mount(t){t&&(this.el&&this.el!==t&&(z("Do Unmount Before Mount"),this.unmount()),this.el=t),this.el&&(z("mounting",this.config.id,this),this.el.ridgeNode=this,this.firstPainted||this.firstPaint(),this.forceUpdateStyle(),this.initializeEvents(),this.initSubscription(),this.componentDefinition||await this.load(),this.componentDefinition&&(this.updateConnectedProperties(),await this.preparePropsBeforeRender(),this.createRenderer(),this.mounted(),z("mounted",this.config.id,this),this.el.setAttribute("ridge-mount","mounted"),this.removeStatus()))}mounted(){this.mounteds&&this.mounteds.forEach((t=>t(this))),this.isMounted=!0}onMounted(t){!0===this.isMounted?t(this):(this.mounteds||(this.mounteds=[]),this.mounteds.push(t))}initChildren(){if(this.config.props.children&&null==this.children){this.children=[];for(const t of this.config.props.children){const e=this.composite.getNode(t);e&&(e.parent=this,this.children.push(e),e.initChildren())}}if(this.config.slots&&this.config.slots.length)for(const t of this.config.slots){const e=this.composite.getNode(t);e&&(e.parent=this,e.initChildren())}}initializeEvents(){this.config.propEx.value&&(this.events.input=t=>{this.composite.store.dispatchChange(this.config.propEx.value,t,this.getScopedData())},this.events.onChange=t=>{this.composite.store.dispatchChange(this.config.propEx.value,t,this.getScopedData())});for(const[t,e]of Object.entries(this.config.events??{}))this.events[t]=(...o)=>{if(Array.isArray(e)){for(const t of e)if(t.store&&t.method){const e={payload:o,scopedData:this.getScopedData(),eventArgs:t.payload};this.composite.store.doStoreAction(t.store,t.method,e)}}else"promoted"===e&&this.composite.emit(this.getId()+"-"+t,o)}}initSubscription(){Object.values(this.config.styleEx).forEach((t=>{this.composite.store?.subscribe&&this.composite.store.subscribe(t,(()=>{this.forceUpdateStyle()}))})),Object.values(this.config.propEx).forEach((t=>{this.composite.store?.subscribe&&this.composite.store.subscribe(t,(()=>{this.forceUpdateProperty()}))}))}createRenderer(){if(null==this.componentDefinition)return null;const{type:t="vanilla"}=this.componentDefinition;try{switch(t){case"vanilla":this.renderer=new L(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el);break;case"react":this.renderer=new M(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el)}}catch(t){this.setStatus("render-error",{code:"R_ERR",error:t}),console.error("组件初始化渲染异常",this.componentDefinition,t)}}forceUpdateStyle(){this.updateConnectedStyle(),this.updateStyle()}forceUpdateProperty(){this.updateConnectedProperties(),this.updateProps()}forceUpdate(){this.forceUpdateStyle(),this.forceUpdateProperty()}updateProps(t){z("updateProps",this.config.id,this),t&&Object.assign(this.properties,t),this.renderer?this.preparePropsBeforeRender().finally((()=>{this.renderUpdate()})):z("updateProps umounted",this.getId(),this)}renderUpdate(){const t=this.getProperties();try{z("updateProps",this.config.id,t),this.renderer.updateProps(t)}catch(e){z("Render Error:",e,this,t)}}updateConnectedStyle(){if(this.composite.store)for(const t of Object.keys(this.config.styleEx||{}))null!=this.config.styleEx[t]&&""!==this.config.styleEx[t]&&(this.style[t]=this.composite.store.getStoreValue(this.config.styleEx[t],this.getScopedData()))}updateChildStyle(t){this.invoke("updateChildStyle",[t])}updateStyle(){this.el&&(this.el.setAttribute("component",this.config.path),this.el.setAttribute("ridge-id",this.config.id),this.el.setAttribute("ridge-title",this.config.title),this.el.classList.add("ridge-element"),!1===this.style.visible?this.el.classList.add("ridge-is-hidden"):this.el.classList.remove("ridge-is-hidden"),this.parent&&this.parent.updateChildStyle(this),this.invoke("onStyleUpdated",[this]))}updateConnectedProperties(){if(this.composite.store)for(const[t,e]of Object.entries(this.config.propEx))if(null!=e&&""!==e)try{this.properties[t]=this.composite.store.getStoreValue(e,this.getScopedData())}catch(t){z("updateConnectedProperties Fail",e,t)}}async preparePropsBeforeRender(){for(const t of this.componentDefinition.props||[])if("image"===t.type||"file"===t.type){const e=this.config.props[t.name]||this.properties[t.name];null!=e&&""!==e&&(this.properties[t.name]=await this.composite.getBlobUrl(e,this.composite.packageName))}else if("slot"===t.type){const e=this.config.props[t.name];if(e){const o=this.composite.getNode(e);o?(o.parent=this,"react"===this.componentDefinition.type?this.properties[t.name]=I(o):this.properties[t.name]=o):this.config.props[t.name]=null}}else if("decorate"===t.type){const e=this.config.props[t.name];e&&(this.properties[t.name]=this.composite.getNode(e))}else if("style"===t.type){const e=this.config.props[t.name];null!=e&&(this.properties[t.name]=e.map&&e.map((t=>{const[e,o]=t.split("/");return e&&o?(this.composite.loader.confirmPackageDependencies(e),o):t})))}}clone(){const t=new $({composite:this.composite,componentDefinition:this.componentDefinition,config:this.config});if(this.children){t.children=[];for(const e of this.children){const o=e.clone();o.parent=t,t.children.push(o)}}return t.isSlot=this.isSlot,t.parent=this.parent,t}invoke(t,e){if(this.renderer)return this.renderer.invoke(t,e)}hasMethod(t){return!!this.renderer&&this.renderer.hasMethod(t)}unmount(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.el=null}}const W=$,T=e()("ridge:composite"),B=class extends J{constructor({id:t,packageName:e,compositePath:o,properties:s,config:r,appPackageObject:n,context:i}){super(),this.id=t,this.config=r,this.compositePath=o,this.context=i,this.appPackageObject=n,this.loader=i.loader,this.packageName=e,this.properties=s||r.properties}async loadConfig(){this.config=await this.context.loadComposite(this.packageName,this.compositePath),null!=this.config&&this.config.elements||(this.config=null)}firstPaint(t){t&&(this.el=t),this.firstPainted=!0,this.updateStyle(),this.initializeNodes(),this.el.closest('[composite-id="'+this.getCompositeId()+'"]')!==this.el&&this.setStatus("Circular"),this.children=[];for(const t of this.config.children??[]){const e=this.getNode(t);if(e){const t=document.createElement("div");this.el.appendChild(t),e.parent=this,this.children.push(e),e.firstPaint(t)}}}initializeNodes(){this.nodes={};for(let t=0;t<this.config.elements.length;t++){const e=this.createElement(this.config.elements[t]);this.nodes[e.getId()]=e}this.initChildren(),this.events={},this.updatePromotedElement()}async initialize(){if(T(this.packageName,this.compositePath,"initialize start"),this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath)),!this.config)return!1}async loadChildren(){const t=[];this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath));for(const e of Object.values(this.nodes))t.push(await e.load());await Promise.allSettled(t)}getCompositeId(){return this.id||`${this.packageName??""}${this.compositePath}`}getNodes(t){const e=Object.values(this.nodes);return t?e.filter(t):e}getNode(t){return this.nodes[t]}getRootNode(t){return this.children.filter((e=>e.id===t))[0]}getBlobUrl(t){return this.context.getBlobUrl(t,this.packageName)}initChildren(){this.config.children?this.children=Array.from(new Set(this.config.children)).map((t=>this.nodes[t])).filter((t=>t)):this.children=Object.values(this.nodes).filter((t=>null==t.config.parent));for(const t of this.children)t.parent=this,t.initChildren()}createElement(t){return new W({composite:this,config:t})}getJsModules(){return this.jsModules||[]}async mount(t){if(t&&(this.el=t,t.ridgeComposite&&t.ridgeComposite.unmount(),this.el.ridgeComposite=this),T(this.packageName,this.compositePath,"mounting"),this.config||(this.setStatus("Loading"),await this.loadConfig()),this.removeStatus("Loading"),!this.config)return void this.setStatus("Page-not-found");this.firstPainted||this.firstPaint(),this.appPackageObject||(this.appPackageObject=await this.context.loadAppPackageJSON(this.packageName)),T("style updated"),await this.importJSFiles(),await this.loadStore(),T(this.packageName,this.compositePath,"js imported"),this.emit("postMount"),T(this.packageName,this.compositePath,"mounting all root eles");const e=[];for(const t of this.children??[])e.push(t.mount());await Promise.allSettled(e),this.onPageLoaded&&this.onPageLoaded(),T(this.packageName,this.compositePath,"mounted"),this.initializeEvents(),this.emit("loaded")}async mountRootComponents(){}unmount(){if(this.el.classList.remove("ridge-composite"),this.el.removeAttribute("composite-id"),this.config){const{classNames:t=[]}=this.config.style;delete this.el.style.background,t&&t.forEach((t=>{this.el.classList.remove(t)}));for(const t of this.children){const e=t.el;try{t.unmount()}catch(t){}e&&e.parentElement===this.el&&this.el.removeChild(e)}this.store&&this.store.destory()}}updateStyle(){if(this.el.classList.add("ridge-composite"),this.el.setAttribute("composite-id",this.getCompositeId()),this.config&&this.config.style&&this.el){this.el.style.background="",this.config.style.widthFix?(this.el.style.width=this.config.style.width+"px",this.el.style.overflowX="hidden"):this.el.style.width="100%",this.config.style.heightFix?(this.el.style.height=this.config.style.height+"px",this.el.style.overflowY="hidden"):this.el.style.height="100%";const{background:t,classNames:e=[]}=this.config.style;t&&Object.assign(this.el.style,{background:t}),e&&e.forEach((t=>{this.el.classList.add(t)}))}}updateChildStyle(t){if(t.el)if(t.config.full)t.el.classList.add("ridge-is-full"),t.el.style.transform="none",t.el.style.width="",t.el.style.height="";else{const e=t.config.style;t.el.classList.remove("ridge-is-full"),t.el.style.position="absolute",t.el.style.left=0,t.el.style.top=0,t.el.style.transform=`translate(${e.x}px, ${e.y}px)`,t.el.style.width=e.width?e.width+"px":"",t.el.style.height=e.height?e.height+"px":""}}getScopedData(){return[]}async importJSFiles(){const{jsFiles:t}=this.config,e=[];for(const o of t??[])try{const t=await this.context.loadModule(this.packageName,o);t&&(t.filePath=o,e.push(t))}catch(t){console.error("JS Module Load Fail: ",this.packageName+"/"+o)}this.jsModules=e}initializeEvents(){this.el.onclick=t=>{this.emit("onClick",[t])}}handleInternalEventConfig(t,e){if(this.config.events&&this.config.events[t])for(const o of this.config.events[t])o.store&&o.method&&this.store.doStoreAction(o.store,o.method,{payload:e,eventArgs:o.payload})}on(t,e){this.events[t]=e}emit(t,e){this.handleInternalEventConfig(t,e),this.events[t]&&this.events[t](e??[]),this.properties[t]&&"function"==typeof this.properties[t]&&this.properties[t].call(null,e)}setProperties(t){this.properties=t,this.store&&this.store.setProperties(this.properties),this.updatePromotedElement()}updatePromotedElement(){if(this.nodes)for(const t of Object.values(this.nodes))for(const[e,o]of Object.entries(t.config.propEx||{}))if("string"==typeof o&&o.startsWith(N+"."+A)){const[s,r,n]=o.split(".");this.properties[n]&&(t.config.props[e]=this.properties[n],t.forceUpdateProperty())}}async loadStore(){this.store=new U(this),this.store.load(this.jsModules,this.properties);const t=this.getNodes().filter((t=>t.config.store));for(const e of t)await e.load(),this.store.load([Object.assign({},e.componentDefinition.component,{name:e.config.id})],e.getProperties())}};window.createDebug=e();const V=e()("ridge:context"),Z=class{constructor({baseUrl:t,loadPropControl:e}){this.VERSION="1.2.0",this.baseUrl=t,V("Ridge Runtime  Version:1.2.0, baseUrl:"+this.baseUrl);const o=new p({baseUrl:this.baseUrl,loadPropControl:e});this.loader=o,this.services={loader:o}}parseRidgePath(t){const e=t.split("/").filter((t=>t));if(e[0].startsWith("@")){if(e.length>=3){const[t,o,...s]=e;return{packageName:t+"/"+o,compositePath:s.join("/")}}return null}if(e.length>=2){const[t,...o]=e;return{packageName:t,compositePath:o.join("/")}}return null}createCompositeByPath(t,e={}){const o=this.parseRidgePath(t);return o?new B({context:this,packageName:o.packageName,compositePath:o.compositePath,properties:e}):null}createComposite(t,e,o){try{return new B({context:this,packageName:t,compositePath:e.startsWith("/")?e:"/"+e,properties:o})}catch(t){return console.error("createComposite error",t),null}}async loadComposite(t,e){if(e){const o=e.endsWith(".json")?e:e+".json";return this.loader.loadJSON(`${t}/${o}`)}{const e=t.endsWith(".json")?t:t+".json";return this.loader.loadJSON(e)}}async getBlobUrl(t,e){return t.startsWith("http")||t.startsWith("data:")||t.startsWith("//")?t:t.startsWith("composite://")?e?this.baseUrl+"/"+e+t.substring(12):this.baseUrl+t.substring(12):this.baseUrl+t}async loadAppPackageJSON(t){return this.loader.getPackageJSON(t)}async loadModule(t,e){let o=(this.baseUrl+"/"+t+"/"+e).replace(/\/\//g,"/");return e.startsWith("composite://")?o=(this.baseUrl+"/"+t+"/"+e.substring(12)).replace(/\/\//g,"/"):e.startsWith("/")&&(o=(this.baseUrl+"/"+e).replace(/\/\//g,"/")),this.loader.loadStoreScript(o)}async loadScript(t){return this.loader.loadScript(t)}};window.RidgeContext=Z;const G=window.location.pathname.split("/");let H="/",q="";G[G.length-3]&&G[G.length-3].startsWith("@")?(q=G[G.length-3]+"/"+G[G.length-2],H=G.slice(0,-3).join("/")):G[G.length-2]&&(H=G.slice(0,-2).join("/"),q=G[G.length-2]),function(){const t=new URLSearchParams(window.location.search),e=window.RIDGE_HOME_PATH||window.location.hash.substring(2)||t.get("path")||"index",o=window.RIDGE_NPM_REPO||H||"/",s=window.RIDGE_HOME_APP||q;window.ridge=new Z({baseUrl:o}),s&&window.ridge.createComposite(s,e,{}).mount(document.getElementById("app")),window.addEventListener("hashchange",(()=>{window.ridge.createComposite(s,window.location.hash.substring(2)||"index",{}).mount(document.getElementById("app"))}))}()})()})();