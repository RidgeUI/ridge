(()=>{var e={1237:e=>{e.exports={externals:[{module:"react",root:"React",dist:"react@18.2.0/umd/react.production.min.js"},{module:"react-dom",dependencies:["react"],root:"ReactDOM",dist:"react-dom@18.2.0/umd/react-dom.production.min.js"},{module:"vue",root:"Vue",dist:"vue/dist/vue.min.js"},{module:"ridgejs",root:"RidgeCore"},{module:"debug",root:"createDebug"},{module:"ridgejs-editor",root:"RidgeEditor"}]}},3401:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(935),o=r.n(s)()(!1);o.push([e.id,"html, body {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n:focus-visible {\r\n  outline: none;\r\n}\r\n\r\n.ridge-composite {\r\n    position: relative;\r\n}\r\n\r\n.ridge-composite > .ridge-element {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\n.ridge-is-full {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.ridge-is-hidden {\r\n    display: none;\r\n}\r\n\r\n.ridge-element:has(.ridge-overlay) {\r\n  position: relative;\r\n}\r\n.ridge-overlay {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.status-Loading {\r\n    background: linear-gradient(90deg,#2e32380d 25%,#2e323817 44%,#2e32380d 88%);\r\n    background-size: 400% 100%;\r\n    animation: skeleton-loading 3s ease infinite;\r\n    animation-fill-mode: forwards;\r\n}\r\n\r\n\r\n.status-not-found, .status-render-error, .status-Circular, .status-Page-not-found {\r\n    position: relative;\r\n    font-size: 9px;\r\n    background-color: rgba(253, 185, 165, .3);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-position: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.status-not-found::before, .status-Circular::before, .status-Page-not-found::before {  \r\n    content: \"内容未找到\";  \r\n    position: absolute;  \r\n    padding-left: 26px;\r\n    left: 50%;\r\n    top: 50%;  \r\n    transform: translate(-50%, -50%);\r\n    font-size: 14px;  \r\n    z-index: -1;  \r\n    background-size: 22px;\r\n    background-repeat: no-repeat;\r\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' viewBox='0 0 24 24'%3E%3Cpath fill='%23e86868' d='M11.953 2C6.465 2 2 6.486 2 12s4.486 10 10 10s10-4.486 10-10S17.493 2 11.953 2M13 17h-2v-2h2zm0-4h-2V7h2z'/%3E%3C/svg%3E\");\r\n    pointer-events: none; /* 防止背景文字影响鼠标事件 */  \r\n}  \r\n\r\n.status-Circular::before {\r\n    content: \"循环渲染异常\"; \r\n}\r\n.status-Page-not-found::before {\r\n    content: \"页面未找到\";  \r\n}\r\n\r\n.ridge-composite:not(.is-edit) .is-store {\r\n    display: none;\r\n}\r\n@keyframes skeleton-loading {\r\n    0% {\r\n        background-position: 100% 50%\r\n    }\r\n\r\n    to {\r\n        background-position: 0 50%\r\n    }\r\n}",""]);const n=o},935:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,s,o,n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(r=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(o," */")),c=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(c).concat([a]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,s){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(s)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(o[i]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);s&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},124:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(o=s))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(7891)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7891:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,n,i=null;function a(...e){if(!a.enabled)return;const s=a,o=Number(new Date),n=o-(r||o);s.diff=n,s.prev=r,s.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";i++;const n=t.formatters[o];if("function"==typeof n){const t=e[i];r=n.call(s,t),e.splice(i,1),i--}return r})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==t.namespaces&&(o=t.namespaces,n=t.enabled(e)),n),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){const s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),o=s.length;for(r=0;r<o;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7250),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},4911:function(e,t){var r,s;void 0===(s="function"==typeof(r=function(){var e=function(){},t={},r={},s={};function o(e,t){if(e){var o=s[e];if(r[e]=t,o)for(;o.length;)o[0](e,t),o.splice(0,1)}}function n(t,r){t.call&&(t={success:t}),r.length?(t.error||e)(r):(t.success||e)(t)}function i(t,r,s,o){var n,a,c,l=document,h=s.async,u=(s.numRetries||0)+1,d=s.before||e,p=t.replace(/[\?|#].*$/,""),f=t.replace(/^(css|img|module|nomodule)!/,"");if(o=o||0,/(^css!|\.css$)/.test(p))(c=l.createElement("link")).rel="stylesheet",c.href=f,(n="hideFocus"in c)&&c.relList&&(n=0,c.rel="preload",c.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p))(c=l.createElement("img")).src=f;else if((c=l.createElement("script")).src=f,c.async=void 0===h||h,a="noModule"in c,/^module!/.test(p)){if(!a)return r(t,"l");c.type="module"}else if(/^nomodule!/.test(p)&&a)return r(t,"l");c.onload=c.onerror=c.onbeforeload=function(e){var a=e.type[0];if(n)try{c.sheet.cssText.length||(a="e")}catch(e){18!=e.code&&(a="e")}if("e"==a){if((o+=1)<u)return i(t,r,s,o)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";r(t,a,e.defaultPrevented)},!1!==d(t,c)&&l.head.appendChild(c)}function a(e,r,s){var a,c;if(r&&r.trim&&(a=r),c=(a?s:r)||{},a){if(a in t)throw"LoadJS";t[a]=!0}function l(t,r){!function(e,t,r){var s,o,n=(e=e.push?e:[e]).length,a=n,c=[];for(s=function(e,r,s){if("e"==r&&c.push(e),"b"==r){if(!s)return;c.push(e)}--n||t(c)},o=0;o<a;o++)i(e[o],s,r)}(e,(function(e){n(c,e),t&&n({success:t,error:r},e),o(a,e)}),c)}if(c.returnPromise)return new Promise(l);l()}return a.ready=function(e,t){return function(e,t){e=e.push?e:[e];var o,n,i,a=[],c=e.length,l=c;for(o=function(e,r){r.length&&a.push(e),--l||t(a)};c--;)n=e[c],(i=r[n])?o(n,i):(s[n]=s[n]||[]).push(o)}(e,(function(e){n(t,e)})),a},a.done=function(e){o(e,[])},a.reset=function(){t={},r={},s={}},a.isDefined=function(e){return e in t},a})?r.apply(t,[]):r)||(e.exports=s)},5098:(e,t,r)=>{var s=r(3305),o=r(9361),n=r(1112),i=r(5276),a=r(7452);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,e.exports=c},1386:(e,t,r)=>{var s=r(2393),o=r(2049),n=r(7144),i=r(5071),a=r(3964);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,e.exports=c},9770:(e,t,r)=>{var s=r(4715)(r(8942),"Map");e.exports=s},8250:(e,t,r)=>{var s=r(9753),o=r(5681),n=r(88),i=r(4732),a=r(9068);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,e.exports=c},5650:(e,t,r)=>{var s=r(8942).Symbol;e.exports=s},5111:e=>{e.exports=function(e,t){for(var r=-1,s=null==e?0:e.length,o=Array(s);++r<s;)o[r]=t(e[r],r,e);return o}},4187:e=>{e.exports=function(e,t,r,s){var o=-1,n=null==e?0:e.length;for(s&&n&&(r=e[++o]);++o<n;)r=t(r,e[o],o,e);return r}},2837:e=>{e.exports=function(e){return e.split("")}},9546:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},3422:(e,t,r)=>{var s=r(7073),o=r(6285),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var i=e[t];n.call(e,t)&&o(i,r)&&(void 0!==r||t in e)||s(e,t,r)}},7034:(e,t,r)=>{var s=r(6285);e.exports=function(e,t){for(var r=e.length;r--;)if(s(e[r][0],t))return r;return-1}},7073:(e,t,r)=>{var s=r(2532);e.exports=function(e,t,r){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},4869:e=>{e.exports=function(e,t,r,s){for(var o=e.length,n=r+(s?1:-1);s?n--:++n<o;)if(t(e[n],n,e))return n;return-1}},7923:(e,t,r)=>{var s=r(3526),o=r(6040);e.exports=function(e,t){for(var r=0,n=(t=s(t,e)).length;null!=e&&r<n;)e=e[o(t[r++])];return r&&r==n?e:void 0}},7379:(e,t,r)=>{var s=r(5650),o=r(8870),n=r(9005),i=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):n(e)}},2478:(e,t,r)=>{var s=r(4869),o=r(9454),n=r(7706);e.exports=function(e,t,r){return t==t?n(e,t,r):s(e,o,r)}},9454:e=>{e.exports=function(e){return e!=e}},9624:(e,t,r)=>{var s=r(3655),o=r(4759),n=r(1580),i=r(4066),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,h=c.toString,u=l.hasOwnProperty,d=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!n(e)||o(e))&&(s(e)?d:a).test(i(e))}},1035:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},7655:(e,t,r)=>{var s=r(3422),o=r(3526),n=r(9632),i=r(1580),a=r(6040);e.exports=function(e,t,r,c){if(!i(e))return e;for(var l=-1,h=(t=o(t,e)).length,u=h-1,d=e;null!=d&&++l<h;){var p=a(t[l]),f=r;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=u){var m=d[p];void 0===(f=c?c(m,p,d):void 0)&&(f=i(m)?m:n(t[l+1])?[]:{})}s(d,p,f),d=d[p]}return e}},3501:e=>{e.exports=function(e,t,r){var s=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var n=Array(o);++s<o;)n[s]=e[s+t];return n}},2291:(e,t,r)=>{var s=r(5650),o=r(5111),n=r(3142),i=r(1187),a=s?s.prototype:void 0,c=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(n(t))return o(t,e)+"";if(i(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},6403:(e,t,r)=>{var s=r(2945),o=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(o,""):e}},3526:(e,t,r)=>{var s=r(3142),o=r(5187),n=r(6493),i=r(5243);e.exports=function(e,t){return s(e)?e:o(e,t)?[e]:n(i(e))}},8931:(e,t,r)=>{var s=r(3501);e.exports=function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:s(e,t,r)}},8774:(e,t,r)=>{var s=r(2478);e.exports=function(e,t){for(var r=e.length;r--&&s(t,e[r],0)>-1;);return r}},7905:(e,t,r)=>{var s=r(2478);e.exports=function(e,t){for(var r=-1,o=e.length;++r<o&&s(t,e[r],0)>-1;);return r}},1950:(e,t,r)=>{var s=r(8942)["__core-js_shared__"];e.exports=s},4326:(e,t,r)=>{var s=r(8931),o=r(3417),n=r(2237),i=r(5243);e.exports=function(e){return function(t){t=i(t);var r=o(t)?n(t):void 0,a=r?r[0]:t.charAt(0),c=r?s(r,1).join(""):t.slice(1);return a[e]()+c}}},3640:(e,t,r)=>{var s=r(4187),o=r(5881),n=r(9850),i=RegExp("['’]","g");e.exports=function(e){return function(t){return s(n(o(t).replace(i,"")),e,"")}}},9968:(e,t,r)=>{var s=r(1035)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=s},2532:(e,t,r)=>{var s=r(4715),o=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},4967:(e,t,r)=>{var s="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=s},4700:(e,t,r)=>{var s=r(9067);e.exports=function(e,t){var r=e.__data__;return s(t)?r["string"==typeof t?"string":"hash"]:r.map}},4715:(e,t,r)=>{var s=r(9624),o=r(155);e.exports=function(e,t){var r=o(e,t);return s(r)?r:void 0}},8870:(e,t,r)=>{var s=r(5650),o=Object.prototype,n=o.hasOwnProperty,i=o.toString,a=s?s.toStringTag:void 0;e.exports=function(e){var t=n.call(e,a),r=e[a];try{e[a]=void 0;var s=!0}catch(e){}var o=i.call(e);return s&&(t?e[a]=r:delete e[a]),o}},155:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},3417:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},5813:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},3305:(e,t,r)=>{var s=r(4497);e.exports=function(){this.__data__=s?s(null):{},this.size=0}},9361:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},1112:(e,t,r)=>{var s=r(4497),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(s){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(t,e)?t[e]:void 0}},5276:(e,t,r)=>{var s=r(4497),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return s?void 0!==t[e]:o.call(t,e)}},7452:(e,t,r)=>{var s=r(4497);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=s&&void 0===t?"__lodash_hash_undefined__":t,this}},9632:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var s=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==s||"symbol"!=s&&t.test(e))&&e>-1&&e%1==0&&e<r}},5187:(e,t,r)=>{var s=r(3142),o=r(1187),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(s(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||i.test(e)||!n.test(e)||null!=t&&e in Object(t)}},9067:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4759:(e,t,r)=>{var s,o=r(1950),n=(s=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";e.exports=function(e){return!!n&&n in e}},2393:e=>{e.exports=function(){this.__data__=[],this.size=0}},2049:(e,t,r)=>{var s=r(7034),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=s(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},7144:(e,t,r)=>{var s=r(7034);e.exports=function(e){var t=this.__data__,r=s(t,e);return r<0?void 0:t[r][1]}},5071:(e,t,r)=>{var s=r(7034);e.exports=function(e){return s(this.__data__,e)>-1}},3964:(e,t,r)=>{var s=r(7034);e.exports=function(e,t){var r=this.__data__,o=s(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},9753:(e,t,r)=>{var s=r(5098),o=r(1386),n=r(9770);e.exports=function(){this.size=0,this.__data__={hash:new s,map:new(n||o),string:new s}}},5681:(e,t,r)=>{var s=r(4700);e.exports=function(e){var t=s(this,e).delete(e);return this.size-=t?1:0,t}},88:(e,t,r)=>{var s=r(4700);e.exports=function(e){return s(this,e).get(e)}},4732:(e,t,r)=>{var s=r(4700);e.exports=function(e){return s(this,e).has(e)}},9068:(e,t,r)=>{var s=r(4700);e.exports=function(e,t){var r=s(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},6853:(e,t,r)=>{var s=r(9011);e.exports=function(e){var t=s(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},4497:(e,t,r)=>{var s=r(4715)(Object,"create");e.exports=s},9005:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8942:(e,t,r)=>{var s=r(4967),o="object"==typeof self&&self&&self.Object===Object&&self,n=s||o||Function("return this")();e.exports=n},7706:e=>{e.exports=function(e,t,r){for(var s=r-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}},2237:(e,t,r)=>{var s=r(2837),o=r(3417),n=r(2013);e.exports=function(e){return o(e)?n(e):s(e)}},6493:(e,t,r)=>{var s=r(6853),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=s((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,r,s,o){t.push(s?o.replace(n,"$1"):r||e)})),t}));e.exports=i},6040:(e,t,r)=>{var s=r(1187);e.exports=function(e){if("string"==typeof e||s(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},4066:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2945:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},2013:e=>{var t="\\ud800-\\udfff",r="["+t+"]",s="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",n="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+s+"|"+o+")?",l="[\\ufe0e\\ufe0f]?",h=l+c+"(?:\\u200d(?:"+[n,i,a].join("|")+")"+l+c+")*",u="(?:"+[n+s+"?",s,i,a,r].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+h,"g");e.exports=function(e){return e.match(d)||[]}},482:e=>{var t="\\ud800-\\udfff",r="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+n+"]",a="\\d+",c="["+r+"]",l="["+s+"]",h="[^"+t+n+a+r+s+o+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+o+"]",f="(?:"+l+"|"+h+")",m="(?:"+p+"|"+h+")",g="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",w=b+v+"(?:\\u200d(?:"+["[^"+t+"]",u,d].join("|")+")"+b+v+")*",x="(?:"+[c,u,d].join("|")+")"+w,C=RegExp([p+"?"+l+"+"+g+"(?="+[i,p,"$"].join("|")+")",m+"+"+y+"(?="+[i,p+f,"$"].join("|")+")",p+"?"+f+"+"+g,p+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,x].join("|"),"g");e.exports=function(e){return e.match(C)||[]}},9677:(e,t,r)=>{var s=r(6005),o=r(3640)((function(e,t,r){return t=t.toLowerCase(),e+(r?s(t):t)}));e.exports=o},6005:(e,t,r)=>{var s=r(5243),o=r(5485);e.exports=function(e){return o(s(e).toLowerCase())}},5881:(e,t,r)=>{var s=r(9968),o=r(5243),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(n,s).replace(i,"")}},6285:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},6123:(e,t,r)=>{var s=r(7923);e.exports=function(e,t,r){var o=null==e?void 0:s(e,t);return void 0===o?r:o}},3142:e=>{var t=Array.isArray;e.exports=t},3655:(e,t,r)=>{var s=r(7379),o=r(1580);e.exports=function(e){if(!o(e))return!1;var t=s(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1580:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},547:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1187:(e,t,r)=>{var s=r(7379),o=r(547);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==s(e)}},9011:(e,t,r)=>{var s=r(8250);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var s=arguments,o=t?t.apply(this,s):s[0],n=r.cache;if(n.has(o))return n.get(o);var i=e.apply(this,s);return r.cache=n.set(o,i)||n,i};return r.cache=new(o.Cache||s),r}o.Cache=s,e.exports=o},1263:(e,t,r)=>{var s=r(7655);e.exports=function(e,t,r){return null==e?e:s(e,t,r)}},5243:(e,t,r)=>{var s=r(2291);e.exports=function(e){return null==e?"":s(e)}},107:(e,t,r)=>{var s=r(2291),o=r(6403),n=r(8931),i=r(8774),a=r(7905),c=r(2237),l=r(5243);e.exports=function(e,t,r){if((e=l(e))&&(r||void 0===t))return o(e);if(!e||!(t=s(t)))return e;var h=c(e),u=c(t),d=a(h,u),p=i(h,u)+1;return n(h,d,p).join("")}},5485:(e,t,r)=>{var s=r(4326)("toUpperCase");e.exports=s},9850:(e,t,r)=>{var s=r(9546),o=r(5813),n=r(5243),i=r(482);e.exports=function(e,t,r){return e=n(e),void 0===(t=r?void 0:t)?o(e)?i(e):s(e):e.match(t)||[]}},7250:e=>{var t=1e3,r=60*t,s=60*r,o=24*s,n=7*o;function i(e,t,r,s){var o=t>=1.5*r;return Math.round(e/r)+" "+s+(o?"s":"")}e.exports=function(e,a){a=a||{};var c,l,h=typeof e;if("string"===h&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===h&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=o?i(c,l,o,"day"):l>=s?i(c,l,s,"hour"):l>=r?i(c,l,r,"minute"):l>=t?i(c,l,t,"second"):c+" ms"):function(e){var n=Math.abs(e);return n>=o?Math.round(e/o)+"d":n>=s?Math.round(e/s)+"h":n>=r?Math.round(e/r)+"m":n>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4699:(e,t,r)=>{var s=r(2591),o=r(3401);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);s(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},2591:(e,t,r)=>{"use strict";var s,o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),n=[];function i(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function a(e,t){for(var r={},s=[],o=0;o<e.length;o++){var a=e[o],c=t.base?a[0]+t.base:a[0],l=r[c]||0,h="".concat(c," ").concat(l);r[c]=l+1;var u=i(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(n[u].references++,n[u].updater(d)):n.push({identifier:h,updater:m(d,t),references:1}),s.push(h)}return s}function c(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var n=r.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,r,s){var o=r?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var n=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n)}}function d(e,t,r){var s=r.css,o=r.media,n=r.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var p=null,f=0;function m(e,t){var r,s,o;if(t.singleton){var n=f++;r=p||(p=c(t)),s=u.bind(null,r,n,!1),o=u.bind(null,r,n,!0)}else r=c(t),s=d.bind(null,r,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var r=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<r.length;s++){var o=i(r[s]);n[o].references--}for(var c=a(e,t),l=0;l<r.length;l++){var h=i(r[l]);0===n[h].references&&(n[h].updater(),n.splice(h,1))}r=c}}}}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={id:s,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0,(()=>{"use strict";r(4699);var e=r(124),t=r.n(e),s=r(4911),o=r.n(s),n=r(9011),i=r.n(n),a=r(1237),c=r.n(a);let l=e=>crypto.getRandomValues(new Uint8Array(e));r(9677),r(107);const h=((e,t=21)=>((e,t,r)=>{let s=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*s*t/e.length);return(n=t)=>{let i="";for(;;){let t=r(o),a=o;for(;a--;)if(i+=e[t[a]&s]||"",i.length===n)return i}}})("1234567890abcdefghijklmnopqrstuvwxyz",t,l))(0,10),u=async e=>{const t=document.createElement("script"),r="ridge-store-"+h(10),{updatedSourceCode:s,importStatements:o}=(e=>{const t=[];let r=e;const s=/import\s+.*?\s+from\s+(['"])(.*?)(['"])/gm;let o;for(;o=s.exec(e);){const e=o[2];t.push(e),r=r.replace(o[0],"")}return{updatedSourceCode:r,importStatements:t}})(e);return t.textContent=s.replace("export default",'window["'+r+'"]='),new Promise(((e,n)=>{try{window.onerror=e=>{try{document.head.removeChild(t),n(e)}catch(e){}},document.head.append(t);const i=window[r];i.jsContent=s,i.dependencies=o,i?e(i):n(new Error("not"))}catch(e){n(e)}finally{delete window[r],window.onerror=null,document.head.removeChild(t)}}))},d=t()("ridge:loader"),p=class{constructor({baseUrl:e,loadPropControl:t}){this.baseUrl=e.replace(/\/$/,""),this.loadPropControl=t,d("RidgeLoader baseUrl: "+this.baseUrl),this.loadedFonts=[],this.themeUrls={},this.getPackageJSON=i()(this._getPackageJSON),this.loadComponent=i()(this._loadComponent),this.loadScript=i()(this._loadScript),this.loadExternal=i()(this._loadExternal),this.loadJSON=i()(this.loadJSON),this.loadStoreScript=i()(this.loadStoreScript),this.loadJsModule=u,this.confirmPackageDependencies=i()(this._confirmPackageDependencies)}getComponentUrl({packageName:e,path:t}){return`${this.baseUrl}/${e}/${t}`}getPackageJSONUrl(e){return`${this.baseUrl}/${e}/package.json`}async _loadComponent(e){let t,r;if("object"==typeof e)t=e.packageName,r=e.path;else{const s=e.split("/");s[0].startsWith("@")?(t=s.splice(0,2).join("/"),r=s.join("/")):(t=s.splice(0,1).join("/"),r=s.join("/"))}const s=await this.doLoadComponent({packageName:t,path:r});return s&&(s.componentPath=e),s}async doLoadComponent({packageName:e,path:t}){d("doLoadComponent",e,t);const r=await this.getPackageJSON(e);if(null==r)return null;await this.confirmPackageDependencies(e);let s=null;return r.ridgeDist?(await this.loadScript(`${r.name}/${r.ridgeDist}`),s=window[r.name][t]):s=await this.loadComponentScript({packageName:e,path:t}),s&&await this.prepareComponent(s,{packageName:e,path:t},r),s}async prepareComponent(e,{packageName:t,path:r}){if(e.packageName=t,e.path=r,e.title=e.title||e.label,Array.isArray(e.externals))for(const r of e.externals)r.startsWith("/")?await this.loadScript(r):await this.loadScript(t+"/"+r);if(e.component){if("function"==typeof e.component&&"AsyncFunction"===e.component.constructor.name&&(e.component=(await e.component()).default),this.loadPropControl)for(const t of e.props||[])t.control&&"function"==typeof t.control&&t.control.toString().startsWith("()")&&(t.controlComponent=(await t.control()).default),t.options&&"function"==typeof t.options&&t.options.toString().startsWith("()")&&(t.optionsLoads=await t.options())}else d("组件 Component定义未加载到",e)}on(e,t){this.eventCallbacks.push({eventName:e,callback:t})}async loadComponentScript({packageName:e,path:t}){await this.loadScript(`${e}/build/${t}.js`);const r=`${e}/${t}`;return window[r]?window[r].default:null}removeCss(e){if(!e)return;const t=Array.from(document.head.children).filter((e=>"link"===e.tagName.toLowerCase()));for(const r of t)r.href.endsWith(e)&&document.head.removeChild(r)}async loadCss(e){const t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("HEAD")[0].appendChild(t)}getFinalCDNUrl(e){let t=e.replace(/\/\//g,"/");t.startsWith("/")||(t="/"+t),t=this.baseUrl+t,t.startsWith("/")||t.indexOf("")}async _loadScript(e){if(null!=e)try{let t=e.replace(/\/\//g,"/");if(t.startsWith("/")||(t="/"+t),Array.from(document.querySelectorAll("script")).find((e=>e.src&&e.src.endsWith(t)))||Array.from(document.querySelectorAll("link")).find((e=>e.href&&e.href.endsWith(t))))return d("Script loaded: ",t),t;const r=this.baseUrl+t;return d("_loadScript:"+r),await o()(r,{returnPromise:!0,before:function(e,t){t.crossOrigin=!0}}),t}catch(t){console.error("JS Load Error:",`${e}`)}}async _getPackageJSON(e){d("getPackageJSON",e);const t=this.getPackageJSONUrl(e);try{return await this.fetchJSON(t)}catch(e){return d("NPM Package Not Loaded:",t),null}}async _confirmPackageDependencies(e){d("_confirmPackageDependencies",e);const t=await this.getPackageJSON(e);if(null==t)return;const r=Object.keys(t.dependencies||{});for(const e of r)await this.loadExternal(e);const s=t.externals||t.prepares,o=[];if(Array.isArray(s))for(const e of s)e.startsWith("/")?o.push(await this.loadScript(e)):o.push(await this.loadScript(t.name+"/"+e));await Promise.allSettled(o),t.themes&&(window.ridgeTheme&&window.ridgeTheme[e]&&t.themes[window.ridgeTheme[e]]?this.loadPackageTheme(e,t.themes[window.ridgeTheme[e]]):this.loadPackageTheme(e,t.themes.default))}async loadPackageTheme(e,t){this.themeUrls[e]&&this.removeCss(this.themeUrls[e]),this.loadCss(this.baseUrl+"/"+t),this.themeUrls[e]=t}async _loadExternal(e){d("_loadExternal",e);const t=c().externals.filter((t=>t.module===e))[0];if(t){if(d("Found External Package",t),t.root&&window[t.root])return;if(t.dependencies)for(const e of t.dependencies)await this.loadExternal(e);if(Array.isArray(t.dist)){const e=[];for(const r of t.dist)e.push(this.loadScript(r));await Promise.allSettled(e)}else"string"==typeof t.dist&&await this.loadScript(t.dist)}}async loadStoreScript(e){return(async e=>{try{const t=await window.fetch(e),r=await t.text();return u(r)}catch(e){return null}})(e)}async fetchJSON(e){try{const t=await window.fetch(e);return t.ok?await t.json():null}catch(e){return null}}async loadJSON(e){return this.fetchJSON(`${this.baseUrl}/${e.replace(/\/\//g,"/")}`)}},f=(Symbol(),Symbol()),m=Object.getPrototypeOf,g=new WeakMap,y=(e,t=!0)=>{g.set(e,t)},v=e=>"object"==typeof e&&null!==e,b=new WeakMap,w=new WeakSet,[x]=((e=Object.is,t=((e,t)=>new Proxy(e,t)),r=(e=>v(e)&&!w.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),s=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),o=new WeakMap,n=((e,t,r=s)=>{const i=o.get(e);if((null==i?void 0:i[0])===t)return i[1];const a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return y(a,!0),o.set(e,[t,a]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(a,t))return;const s=Reflect.get(e,t),{enumerable:o}=Reflect.getOwnPropertyDescriptor(e,t),i={value:s,enumerable:o,configurable:!0};if(w.has(s))y(s,!1);else if(s instanceof Promise)delete i.value,i.get=()=>r(s);else if(b.has(s)){const[e,t]=b.get(s);i.value=n(e,t(),r)}Object.defineProperty(a,t,i)})),Object.preventExtensions(a)}),i=new WeakMap,a=[1,1],c=(s=>{if(!v(s))throw new Error("object required");const o=i.get(s);if(o)return o;let l=a[0];const h=new Set,u=(e,t=++a[0])=>{l!==t&&(l=t,h.forEach((r=>r(e,t))))};let d=a[1];const p=e=>(t,r)=>{const s=[...t];s[1]=[e,...s[1]],u(s,r)},y=new Map,x=e=>{var t;const r=y.get(e);r&&(y.delete(e),null==(t=r[1])||t.call(r))},C=Array.isArray(s)?[]:Object.create(Object.getPrototypeOf(s)),S=t(C,{deleteProperty(e,t){const r=Reflect.get(e,t);x(t);const s=Reflect.deleteProperty(e,t);return s&&u(["delete",[t],r]),s},set(t,s,o,n){const a=Reflect.has(t,s),l=Reflect.get(t,s,n);if(a&&(e(l,o)||i.has(o)&&e(l,i.get(o))))return!0;var d;x(s),v(o)&&(o=(e=>e&&(g.has(e)?g.get(e):m(e)===Object.prototype||m(e)===Array.prototype))(d=o)&&d[f]||null||o);let C=o;if(o instanceof Promise)o.then((e=>{o.status="fulfilled",o.value=e,u(["resolve",[s],e])})).catch((e=>{o.status="rejected",o.reason=e,u(["reject",[s],e])}));else{!b.has(o)&&r(o)&&(C=c(o));const e=!w.has(C)&&b.get(C);e&&((e,t)=>{if(y.has(e))throw new Error("prop listener already exists");if(h.size){const r=t[3](p(e));y.set(e,[t,r])}else y.set(e,[t])})(s,e)}return Reflect.set(t,s,C,n),u(["set",[s],o,l]),!0}});i.set(s,S);const j=[C,(e=++a[1])=>(d===e||h.size||(d=e,y.forEach((([t])=>{const r=t[1](e);r>l&&(l=r)}))),l),n,e=>(h.add(e),1===h.size&&y.forEach((([e,t],r)=>{if(t)throw new Error("remove already exists");const s=e[3](p(r));y.set(r,[e,s])})),()=>{h.delete(e),0===h.size&&y.forEach((([e,t],r)=>{t&&(t(),y.set(r,[e]))}))})];return b.set(S,j),Reflect.ownKeys(s).forEach((e=>{const t=Object.getOwnPropertyDescriptor(s,e);"value"in t&&(S[e]=s[e],delete t.value,delete t.writable),Object.defineProperty(C,e,t)})),S}))=>[c,b,w,e,t,r,s,o,n,i,a])();function C(e={}){return x(e)}var S=r(1263),j=r.n(S),P=r(6123),O=r.n(P);const E=t()("ridge:store"),k=t()("ridge:store-error"),_=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return e}};class R{constructor(e,t){this.module=e,this.composite=t,this.watchers={"*":new Set},this.computedDependencies={},this.state={},this.globals={},this.externalModules={},this.context=new Proxy(this,{get:function(e,t){switch(t){case"composite":return e.composite;case"emit":return(t,r)=>{e.composite.emit(t,_(r))};case"setState":return t=>{Object.assign(e.state,t)};case"properties":return e.properties;case"state":return e.state;case"scope":return;default:if(void 0!==e.state[t])return e.computedUsedState&&e.computedUsedState.push(t),e.state[t];if(e.module.actions&&e.module.actions[t])return e.module.actions[t];if(e.module.computed&&e.module.computed[t]){if("function"==typeof e.module.computed[t])return e.module.computed[t].call(e.context);if("function"==typeof e.module.computed[t].get)return e.module.computed[t].get.call(e.context)}else{if(e.globals[t])return e.globals[t];if(e.externalModules[t])return e.externalModules[t];if(window[t])return window[t]}}},set:function(e,t,r){return void 0!==e.state[t]?e.state[t]=r:e.globals[t]=r,!0}}),this.scheduledJobs=new Set}async initStore(e,r){if(this.properties=e,this.globalVariables=r,this.module.externals)for(const e of Object.keys(this.module.externals))await this.composite.context.loadScript(this.module.externals[e]),this.externalModules[e]=window[e];for(const e of this.module.properties||[])null==this.properties[e.name]&&null!=e.value&&(this.properties[e.name]=e.value);if("function"==typeof this.module.state)try{this.state=C(await this.module.state(e))}catch(e){console.error("initStore Error",e)}else"object"==typeof this.module.state?this.state=C(_(this.module.state)):this.state={};if(this.state&&function(e,t,r){const s=b.get(e);let o;s||console.warn("Please use proxy object");const n=[],i=s[3];let a=!1;i((e=>{n.push(e),o||(o=Promise.resolve().then((()=>{o=void 0,a&&t(n.splice(0))})))}));a=!0}(this.state,(e=>{this.onMutations(e)})),this.module.setup)try{const e=await async function(e,t){if(!t)return await e(),-1;const r=performance.now();return await e(),performance.now()-r}((async()=>{await this.module.setup.call(this.context,this.context)}),t().enabled);e>-1&&t()("Module Setup:",this.module.name,"Duration:",e+"ms"),this.storeSetUp=!0,this.flushScheduledJobs()}catch(e){console.error("Module Setup Error!",this.module,e)}}updateProps(e){this.properties=e;const t=[];for(const r in e)this.watchers[r]&&t.push(...this.watchers[r]),this.module.watch&&this.module.watch[r]&&this.module.watch[r].call(this.context,e[r],e);this.scheduleCallback(t),this.module.update&&this.module.update.call(this.context,e),this.flushScheduledJobs()}subscribe(e,t,r){const s=t.join(".");switch(e){case"state":case"prop":this.addWatchers(s,r);break;case"computed":if(this.module.computed&&this.module.computed[s])if(Array.isArray(this.module.computed[s].dependencies))for(const e of this.module.computed[s].dependencies)this.addWatchers(e,r);else this.addWatchers(s,r)}}addWatchers(e,t){null==this.watchers[e]&&(this.watchers[e]=new Set),this.watchers[e].add(t)}getValue(e,t,r){let s=null;if("state"===e)s=O()(this.state,t);else if("computed"===e){const e=[...r];e.push(function(e,t){const r=b.get(e);r||console.warn("Please use proxy object");const[s,o,n]=r;return n(s,o(),void 0)}(this.context.state));const o=this.module.computed[t];if(o){this.computedUsedState=[];try{"function"==typeof o?s=o.call(this.context,...e):"function"==typeof o.get&&(s=o.get.call(this.context,...e)),this.computedDependencies[t]?this.computedDependencies[t]=Array.from(new Set([...this.computedDependencies[t],...this.computedUsedState])):this.computedDependencies[t]=this.computedUsedState}catch(e){console.error("getValue Error",e),this.storeSetUp&&console.error("ComputedError: ",o,r)}}}else if("prop"===e)return this.context.properties[t];return null!=s&&(s=_(s)),s}dispatchChange(e,t,r,s){if("state"===e)j()(this.state,t.split("."),r);else if("computed"===e&&this.module.computed&&"function"==typeof this.module.computed[t]?.set)try{this.module.computed[t]?.set.call(this.context,r,this.state,...s)}catch(e){k("dispatchChange Error",e)}}doStoreAction(e,{scopedData:r,payload:s,eventArgs:o}){if(this.module.actions&&this.module.actions[e])try{const n=[];""!==o&&n.push(o),n.push(...s),r&&r.length&&n.push(...r);const i=function(e,t){if(!t)return e(),-1;const r=performance.now();return e(),performance.now()-r}((()=>{const t=this.module.actions[e].call(this.context,...n);"object"==typeof t&&this.context.setState(t)}),t().enabled);i>-1&&t()("Action Dura",e,n,i)}catch(e){console.error("doStoreAction Error",e)}}onMutations(e){for(const t of e){const[e,r,s,o]=t;E("mutation",e,r.join("."),s,o),this.onStateChange(r,s,o)}this.flushScheduledJobs()}onStateChange(e,t,r){e.join(".");const s=[],o=new Set;let n="";for(let t=0;t<e.length;t++){n=e.slice(0,t+1).join("."),this.watchers[n]&&s.push(...this.watchers[n]);for(const e in this.computedDependencies)this.computedDependencies[e].indexOf(n)>-1&&s.push(...this.watchers[e]??[]);if(this.module.watch&&this.module.watch[n]){const e=this.module.watch[n];o.add(e)}}s.push(...Array.from(o).map((e=>()=>{e.call(this.context,r)}))),this.scheduleCallback(s)}scheduleCallback(e){for(const t of e)this.scheduledJobs.add(t)}flushScheduledJobs(){for(const e of this.scheduledJobs)try{e()}catch(e){console.error("job exec error",e)}this.scheduledJobs.clear()}destory(){this.module.destory&&this.module.destory.call(this.context)}}const N="Promote",F="props",A=t()("ridge:store");t()("ridge:store-error");class U{constructor(e){this.composite=e,this.properties=e.properties,this.storeObjects={}}setProperties(e){this.properties=e;for(const t of Object.values(this.storeObjects))t.updateProps(e)}load(e,t){for(const r of Array.isArray(e)?e:[e])this.registerPageStore(r,t)}getStoreValue(e,t){const[r,s,...o]=e.split(".");return r===N&&s===F?this.properties[o[0]]:this.storeObjects[r]?this.storeObjects[r].getValue(s,o.join("."),t):void 0}subscribe(e,t){if(e)try{const[r,s,...o]=e.split(".");A("subscribe",e),this.storeObjects[r]&&this.storeObjects[r].subscribe(s,o,t)}catch(t){console.error("subscribe error",e,t)}}dispatchChange(e,t,r){const[s,o,...n]=e.split(".");this.storeObjects[s]&&this.storeObjects[s].dispatchChange(o,n.join("."),t,r)}doStoreAction(e,t,r){this.storeObjects[e]&&this.storeObjects[e].doStoreAction(t,r)}registerPageStore(e,t){if(A("RegisterPageStore",e),!e.name)return void A("Store Not Registered: No Name");const r=e.name;this.storeObjects[r]=new R(e,this.composite),this.storeObjects[r].initStore(t)}destory(){for(const e of Object.values(this.storeObjects))e.destory()}}class D{async mount(){}setOption(e){}updateProps(e){}layout(e){}invoke(e,t){}on(e,t){}destroy(){}}class M extends D{constructor(e,t={}){super(),this.JSXComponent=e,this.props=t,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref}mount(e){this.el=e,this.root=ReactDOM.createRoot(e),this.root.render(this.getRenderInstance())}getRenderInstance(){return React.createElement(this.JSXComponent,this.props)}on(e,t){Object.assign(this.props,{[e]:t}),this.root.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(e,t){if(this.renderRef&&this.renderRef.current&&this.renderRef.current[e]&&"function"==typeof this.renderRef.current[e])return this.renderRef.current[e](...t||[])}hasMethod(e){return this.renderRef&&this.renderRef.current&&this.renderRef.current[e]&&"function"==typeof this.renderRef.current[e]}setOption(e){this.updateProps(e)}updateProps(e){this.props=Object.assign({},e,{ref:this.props.ref}),this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps&&this.renderRef.current.updateProps(e),this.root.render(this.getRenderInstance())}layout(e){ReactDOM.render(React.createElement(this.JSXComponent,e),this.el)}destroy(){this.root.unmount(),this.renderRef&&(this.renderRef=null)}}class L extends D{constructor(e,t={}){super(),this.VannilaComponent=e,this.props=t}mount(e){this.el=e,this.getRenderInstance().mount(e)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(e,t){this.instance.on(e,t)}invoke(e,t){if(this.getRenderInstance()[e])return this.getRenderInstance()[e].apply(this.getRenderInstance(),t)}hasMethod(e){return null!=this.getRenderInstance()[e]}setOption(e){this.updateProps(e)}updateProps(e){this.getRenderInstance().update(e)}layout(){this.getRenderInstance().layout()}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}const J=e=>({scope:t}={})=>{class r extends React.Component{constructor(e){super(e),this.scope=e.scope,this.ref=React.createRef(),this.ridgeElement=null}componentDidMount(){this.props.scope?this.ridgeElement?(this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.forceUpdate()):(this.ridgeElement=this.props.element.clone(),this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.mount(this.ref.current)):(this.ridgeElement=this.props.element,this.ridgeElement.el&&this.ridgeElement.unmount(),this.ridgeElement.mount(this.ref.current))}componentWillUnmount(){this.ridgeElement.unmount()}render(){return React.createElement("div",{ref:this.ref,style:{width:"100%",height:"100%"}})}}return React.createElement(r,{element:e,scope:t})},z=class{async load(){}async mount(e){}setProperties(e){}unmount(){}invoke(){}setStatus(e,t){this.status=e,this.el&&this.el.classList.add("status-"+e)}getStatus(){return this.status}removeStatus(e){if(this.status=null,this.el)for(const t of this.el.classList)e?t==="status-"+e&&this.el.classList.remove(t):t.startsWith("status-")&&this.el.classList.remove(t)}},I=t()("ridge:element");class $ extends z{constructor({config:e,composite:t,componentDefinition:r}){super(),this.config=e,this.uuid="ins-"+h(8),this.composite=t,this.componentDefinition=r,this.properties={},this.events={},I("create",this.config.id)}getId(){return this.config.id}getProperties(){return Object.assign({width:this.style.width,height:this.style.height,__composite:this.composite,visible:this.style.visible},this.config.props,this.events,this.properties,{children:this.children})}getConfig(){return this.config}getEl(){return this.el}getParent(){return this.parent}getScopedData(){const e=this.getParent(),t=e?e.getScopedData():[];return null==this.scopedData?t:[this.scopedData,...t]}setScopedData(e){this.scopedData=e}async load(e){if(this.componentDefinition||this.config.path&&(this.componentDefinition=await this.composite.context.loader.loadComponent(this.config.path)),this.componentDefinition){if(e&&this.config.props.children)for(const e of this.config.props.children){const t=this.composite.getNode(e);t&&await t.load(!0)}return!0}return this.setStatus("not-found"),!1}firstPaint(e){e&&(this.el=e),I("el first paint",this.config.title,this),this.firstPainted=!0,this.setStatus("Loading"),this.el.setAttribute("ridge-title",this.config.title),this.el.setAttribute("ridge-mount","mounting"),this.style=Object.assign({},this.config.style),this.updateStyle()}async mount(e){e&&(this.el&&this.el!==e&&(I("Do Unmount Before Mount"),this.unmount()),this.el=e),this.el&&(I("mounting",this.config.id,this),this.el.ridgeNode=this,this.firstPainted||this.firstPaint(),this.forceUpdateStyle(),this.initializeEvents(),this.initSubscription(),this.componentDefinition||await this.load(),this.componentDefinition&&(this.updateConnectedProperties(),await this.preparePropsBeforeRender(),this.createRenderer(),this.mounted(),I("mounted",this.config.id,this),this.el.setAttribute("ridge-mount","mounted"),this.removeStatus()))}mounted(){this.mounteds&&this.mounteds.forEach((e=>e(this))),this.isMounted=!0}onMounted(e){!0===this.isMounted?e(this):(this.mounteds||(this.mounteds=[]),this.mounteds.push(e))}initChildren(){if(this.config.props.children&&null==this.children){this.children=[];for(const e of this.config.props.children){const t=this.composite.getNode(e);t&&(t.parent=this,this.children.push(t),t.initChildren())}}if(this.config.slots&&this.config.slots.length)for(const e of this.config.slots){const t=this.composite.getNode(e);t&&(t.parent=this,t.initChildren())}}initializeEvents(){this.config.propEx.value&&(this.events.input=e=>{this.composite.store.dispatchChange(this.config.propEx.value,e,this.getScopedData())},this.events.onChange=e=>{this.composite.store.dispatchChange(this.config.propEx.value,e,this.getScopedData())});for(const[e,t]of Object.entries(this.config.events??{}))this.events[e]=(...r)=>{if(Array.isArray(t)){for(const e of t)if(e.store&&e.method){const t={payload:r,scopedData:this.getScopedData(),eventArgs:e.payload};this.composite.store.doStoreAction(e.store,e.method,t)}}else"promoted"===t&&this.composite.emit(this.getId()+"-"+e,r)}}initSubscription(){Object.values(this.config.styleEx).forEach((e=>{this.composite.store?.subscribe&&this.composite.store.subscribe(e,(()=>{this.forceUpdateStyle()}))})),Object.values(this.config.propEx).forEach((e=>{this.composite.store?.subscribe&&this.composite.store.subscribe(e,(()=>{this.forceUpdateProperty()}))}))}createRenderer(){if(null==this.componentDefinition)return null;const{type:e="vanilla"}=this.componentDefinition;try{switch(e){case"vanilla":this.renderer=new L(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el);break;case"react":this.renderer=new M(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el)}}catch(e){this.setStatus("render-error",{code:"R_ERR",error:e}),console.error("组件初始化渲染异常",this.componentDefinition,e)}}forceUpdateStyle(){this.updateConnectedStyle(),this.updateStyle()}forceUpdateProperty(){this.updateConnectedProperties(),this.updateProps()}forceUpdate(){this.forceUpdateStyle(),this.forceUpdateProperty()}updateProps(e){I("updateProps",this.config.id,this),e&&Object.assign(this.properties,e),this.renderer?this.preparePropsBeforeRender().finally((()=>{this.renderUpdate()})):I("updateProps umounted",this.getId(),this)}renderUpdate(){const e=this.getProperties();try{I("updateProps",this.config.id,e),this.renderer.updateProps(e)}catch(t){I("Render Error:",t,this,e)}}updateConnectedStyle(){if(this.composite.store)for(const e of Object.keys(this.config.styleEx||{}))null!=this.config.styleEx[e]&&""!==this.config.styleEx[e]&&(this.style[e]=this.composite.store.getStoreValue(this.config.styleEx[e],this.getScopedData()))}updateChildStyle(e){this.invoke("updateChildStyle",[e])}updateStyle(){this.el&&(this.el.setAttribute("component",this.config.path),this.el.setAttribute("ridge-id",this.config.id),this.el.setAttribute("ridge-title",this.config.title),this.el.classList.add("ridge-element"),!1===this.style.visible?this.el.classList.add("ridge-is-hidden"):this.el.classList.remove("ridge-is-hidden"),this.parent&&this.parent.updateChildStyle(this),this.invoke("onStyleUpdated",[this]))}updateConnectedProperties(){if(this.composite.store)for(const[e,t]of Object.entries(this.config.propEx))if(null!=t&&""!==t)try{this.properties[e]=this.composite.store.getStoreValue(t,this.getScopedData())}catch(e){I("updateConnectedProperties Fail",t,e)}}async preparePropsBeforeRender(){for(const e of this.componentDefinition.props||[])if("image"===e.type||"file"===e.type){const t=this.config.props[e.name]||this.properties[e.name];null!=t&&""!==t&&(this.properties[e.name]=await this.composite.getBlobUrl(t,this.composite.packageName))}else if("slot"===e.type){const t=this.config.props[e.name];if(t){const r=this.composite.getNode(t);r?(r.parent=this,"react"===this.componentDefinition.type?this.properties[e.name]=J(r):this.properties[e.name]=r):this.config.props[e.name]=null}}else if("decorate"===e.type){const t=this.config.props[e.name];t&&(this.properties[e.name]=this.composite.getNode(t))}else if("style"===e.type){const t=this.config.props[e.name];null!=t&&(this.properties[e.name]=t.map&&t.map((e=>{const[t,r]=e.split("/");return t&&r?(this.composite.loader.confirmPackageDependencies(t),r):e})))}}clone(){const e=new $({composite:this.composite,componentDefinition:this.componentDefinition,config:this.config});if(this.children){e.children=[];for(const t of this.children){const r=t.clone();r.parent=e,e.children.push(r)}}return e.isSlot=this.isSlot,e.parent=this.parent,e}invoke(e,t){if(this.renderer)return this.renderer.invoke(e,t)}hasMethod(e){return!!this.renderer&&this.renderer.hasMethod(e)}unmount(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.el=null}}const W=$,T=t()("ridge:composite"),B=class extends z{constructor({id:e,packageName:t,compositePath:r,properties:s,config:o,appPackageObject:n,context:i}){super(),this.id=e,this.config=o,this.compositePath=r,this.context=i,this.appPackageObject=n,this.loader=i.loader,this.packageName=t,this.properties=s||o.properties}async loadConfig(){this.config=await this.context.loadComposite(this.packageName,this.compositePath),null!=this.config&&this.config.elements||(this.config=null)}firstPaint(e){e&&(this.el=e),this.firstPainted=!0,this.updateStyle(),this.initializeNodes(),this.el.closest('[composite-id="'+this.getCompositeId()+'"]')!==this.el&&this.setStatus("Circular"),this.children=[];for(const e of this.config.children??[]){const t=this.getNode(e);if(t){const e=document.createElement("div");this.el.appendChild(e),t.parent=this,this.children.push(t),t.firstPaint(e)}}}initializeNodes(){this.nodes={};for(let e=0;e<this.config.elements.length;e++){const t=this.createElement(this.config.elements[e]);this.nodes[t.getId()]=t}this.initChildren(),this.events={},this.updatePromotedElement()}async initialize(){if(T(this.packageName,this.compositePath,"initialize start"),this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath)),!this.config)return!1}async loadChildren(){const e=[];this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath));for(const t of Object.values(this.nodes))e.push(await t.load());await Promise.allSettled(e)}getCompositeId(){return this.id||`${this.packageName??""}${this.compositePath}`}getNodes(e){const t=Object.values(this.nodes);return e?t.filter(e):t}getNode(e){return this.nodes[e]}getRootNode(e){return this.children.filter((t=>t.id===e))[0]}getBlobUrl(e){return this.context.getBlobUrl(e,this.packageName)}initChildren(){this.config.children?this.children=Array.from(new Set(this.config.children)).map((e=>this.nodes[e])).filter((e=>e)):this.children=Object.values(this.nodes).filter((e=>null==e.config.parent));for(const e of this.children)e.parent=this,e.initChildren()}createElement(e){return new W({composite:this,config:e})}getJsModules(){return this.jsModules||[]}async mount(e){if(e&&(this.el=e,e.ridgeComposite&&e.ridgeComposite.unmount(),this.el.ridgeComposite=this),T(this.packageName,this.compositePath,"mounting"),this.config||(this.setStatus("Loading"),await this.loadConfig()),this.removeStatus("Loading"),!this.config)return void this.setStatus("Page-not-found");this.firstPainted||this.firstPaint(),this.appPackageObject||(this.appPackageObject=await this.context.loadAppPackageJSON(this.packageName)),T("style updated"),await this.importJSFiles(),await this.loadStore(),T(this.packageName,this.compositePath,"js imported"),this.emit("postMount"),T(this.packageName,this.compositePath,"mounting all root eles");const t=[];for(const e of this.children??[])t.push(e.mount());await Promise.allSettled(t),this.onPageLoaded&&this.onPageLoaded(),T(this.packageName,this.compositePath,"mounted"),this.initializeEvents(),this.emit("loaded")}async mountRootComponents(){}unmount(){if(this.el.classList.remove("ridge-composite"),this.el.removeAttribute("composite-id"),this.config){const{classNames:e=[]}=this.config.style;delete this.el.style.background,e&&e.forEach((e=>{this.el.classList.remove(e)}));for(const e of this.children){const t=e.el;try{e.unmount()}catch(e){}t&&t.parentElement===this.el&&this.el.removeChild(t)}this.store&&this.store.destory()}}updateStyle(){if(this.el.classList.add("ridge-composite"),this.el.setAttribute("composite-id",this.getCompositeId()),this.config&&this.config.style&&this.el){this.el.style.background="",this.config.style.widthFix?(this.el.style.width=this.config.style.width+"px",this.el.style.overflowX="hidden"):this.el.style.width="100%",this.config.style.heightFix?(this.el.style.height=this.config.style.height+"px",this.el.style.overflowY="hidden"):this.el.style.height="100%";const{background:e,classNames:t=[]}=this.config.style;e&&Object.assign(this.el.style,{background:e}),t&&t.forEach((e=>{this.el.classList.add(e)}))}}updateChildStyle(e){if(e.el)if(e.config.full)e.el.classList.add("ridge-is-full"),e.el.style.transform="none",e.el.style.width="",e.el.style.height="";else{const t=e.config.style;e.el.classList.remove("ridge-is-full"),e.el.style.position="absolute",e.el.style.left=0,e.el.style.top=0,e.el.style.transform=`translate(${t.x}px, ${t.y}px)`,e.el.style.width=t.width?t.width+"px":"",e.el.style.height=t.height?t.height+"px":""}}getScopedData(){return[]}async importJSFiles(){const{jsFiles:e}=this.config,t=[];for(const r of e??[])try{const e=await this.context.loadModule(this.packageName,r);e&&(e.filePath=r,t.push(e))}catch(e){console.error("JS Module Load Fail: ",this.packageName+"/"+r)}this.jsModules=t}initializeEvents(){this.el.onclick=e=>{this.emit("onClick",[e])}}handleInternalEventConfig(e,t){if(this.config.events&&this.config.events[e])for(const r of this.config.events[e])r.store&&r.method&&this.store.doStoreAction(r.store,r.method,{payload:t,eventArgs:r.payload})}on(e,t){this.events[e]=t}emit(e,t){this.handleInternalEventConfig(e,t),this.events[e]&&this.events[e](t??[]),this.properties[e]&&"function"==typeof this.properties[e]&&this.properties[e].call(null,t)}setProperties(e){this.properties=e,this.store&&this.store.setProperties(this.properties),this.updatePromotedElement()}updatePromotedElement(){if(this.nodes)for(const e of Object.values(this.nodes))for(const[t,r]of Object.entries(e.config.propEx||{}))if("string"==typeof r&&r.startsWith(N+"."+F)){const[s,o,n]=r.split(".");this.properties[n]&&(e.config.props[t]=this.properties[n],e.forceUpdateProperty())}}async loadStore(){this.store=new U(this),this.store.load(this.jsModules,this.properties);const e=this.getNodes().filter((e=>e.config.store));for(const t of e)await t.load(),this.store.load([Object.assign({},t.componentDefinition.component,{name:t.config.id})],t.getProperties())}};window.createDebug=t();const V=t()("ridge:context"),Z=React;var G=r.n(Z);window.Ridge=class{constructor({baseUrl:e,loadPropControl:t}){this.VERSION="1.2.0",this.baseUrl=e,V("Ridge Runtime  Version:1.2.0, baseUrl:"+this.baseUrl);const r=new p({baseUrl:this.baseUrl,loadPropControl:t});this.loader=r,this.services={loader:r}}parseRidgePath(e){const t=e.split("/").filter((e=>e));if(t[0].startsWith("@")){if(t.length>=3){const[e,r,...s]=t;return{packageName:e+"/"+r,compositePath:s.join("/")}}return null}if(t.length>=2){const[e,...r]=t;return{packageName:e,compositePath:r.join("/")}}return null}createCompositeByPath(e,t={}){const r=this.parseRidgePath(e);return r?new B({context:this,packageName:r.packageName,compositePath:r.compositePath,properties:t}):null}createComposite(e,t,r){try{return new B({context:this,packageName:e,compositePath:t.startsWith("/")?t:"/"+t,properties:r})}catch(e){return console.error("createComposite error",e),null}}async loadComposite(e,t){if(t){const r=t.endsWith(".json")?t:t+".json";return this.loader.loadJSON(`${e}/${r}`)}{const t=e.endsWith(".json")?e:e+".json";return this.loader.loadJSON(t)}}async getBlobUrl(e,t){return e.startsWith("http")||e.startsWith("data:")||e.startsWith("//")?e:e.startsWith("composite://")?t?this.baseUrl+"/"+t+e.substring(12):this.baseUrl+e.substring(12):this.baseUrl+e}async loadAppPackageJSON(e){return this.loader.getPackageJSON(e)}async loadModule(e,t){let r=(this.baseUrl+"/"+e+"/"+t).replace(/\/\//g,"/");return t.startsWith("composite://")?r=(this.baseUrl+"/"+e+"/"+t.substring(12)).replace(/\/\//g,"/"):t.startsWith("/")&&(r=(this.baseUrl+"/"+t).replace(/\/\//g,"/")),this.loader.loadStoreScript(r)}async loadScript(e){return this.loader.loadScript(e)}},window.RidgeCore={ReactComposite:({app:e,path:t,ridge:r,...s})=>{const o=(0,Z.useRef)(null);let n=r;return n||(n=globalThis.ridge),n?((0,Z.useEffect)((()=>{n.createComposite(e,t,s).mount(o.current)}),[e,t]),(0,Z.useEffect)((()=>{o.current.ridgeComposite&&o.current.ridgeComposite.setProperties(s)})),G().createElement("div",{ref:o,className:"composite-view",style:{width:"100%",height:"100%"}})):(console.error("请在页面引入ridgejs库"),G().createElement(G().Fragment,null,"请在页面引入ridgejs库"))}}})()})();