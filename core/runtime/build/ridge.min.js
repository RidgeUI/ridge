/*! For license information please see ridge.min.js.LICENSE.txt */
(()=>{var t={88:(t,e,s)=>{var r=s(4700);t.exports=function(t){return r(this,t).get(t)}},107:(t,e,s)=>{var r=s(2291),o=s(6403),n=s(8931),i=s(8774),a=s(7905),c=s(2237),h=s(5243);t.exports=function(t,e,s){if((t=h(t))&&(s||void 0===e))return o(t);if(!t||!(e=r(e)))return t;var l=c(t),u=c(e),d=a(l,u),p=i(l,u)+1;return n(l,d,p).join("")}},124:(t,e,s)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;e.splice(1,0,s,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))})),e.splice(o,0,s)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=s(7891)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},155:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},482:t=>{var e="\\ud800-\\udfff",s="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+n+"]",a="\\d+",c="["+s+"]",h="["+r+"]",l="[^"+e+n+a+s+r+o+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+o+"]",f="(?:"+h+"|"+l+")",m="(?:"+p+"|"+l+")",g="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",v="[\\ufe0e\\ufe0f]?",w=v+b+"(?:\\u200d(?:"+["[^"+e+"]",u,d].join("|")+")"+v+b+")*",C="(?:"+[c,u,d].join("|")+")"+w,x=RegExp([p+"?"+h+"+"+g+"(?="+[i,p,"$"].join("|")+")",m+"+"+y+"(?="+[i,p+f,"$"].join("|")+")",p+"?"+f+"+"+g,p+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,C].join("|"),"g");t.exports=function(t){return t.match(x)||[]}},547:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},935:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=function(t,e){var s,r,o,n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var a=(s=i,r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(c).concat([a]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(o[i]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&o[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),e.push(c))}},e}},1035:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},1112:(t,e,s)=>{var r=s(4497),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var s=e[t];return"__lodash_hash_undefined__"===s?void 0:s}return o.call(e,t)?e[t]:void 0}},1187:(t,e,s)=>{var r=s(7379),o=s(547);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==r(t)}},1237:t=>{t.exports={externals:[{module:"react",root:"React",dist:"react@18.2.0/umd/react.production.min.js"},{module:"react-dom",dependencies:["react"],root:"ReactDOM",dist:"react-dom@18.2.0/umd/react-dom.production.min.js"},{module:"vue",root:"Vue",dist:"vue/dist/vue.min.js"},{module:"ridgejs",root:"RidgeCore"},{module:"debug",root:"createDebug"},{module:"ridgejs-editor",root:"RidgeEditor"}]}},1263:(t,e,s)=>{var r=s(7655);t.exports=function(t,e,s){return null==t?t:r(t,e,s)}},1386:(t,e,s)=>{var r=s(2393),o=s(2049),n=s(7144),i=s(5071),a=s(3964);function c(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},1580:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},1950:(t,e,s)=>{var r=s(8942)["__core-js_shared__"];t.exports=r},2013:t=>{var e="\\ud800-\\udfff",s="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",n="[^"+e+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+o+")?",h="[\\ufe0e\\ufe0f]?",l=h+c+"(?:\\u200d(?:"+[n,i,a].join("|")+")"+h+c+")*",u="(?:"+[n+r+"?",r,i,a,s].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+l,"g");t.exports=function(t){return t.match(d)||[]}},2049:(t,e,s)=>{var r=s(7034),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,s=r(e,t);return!(s<0||(s==e.length-1?e.pop():o.call(e,s,1),--this.size,0))}},2237:(t,e,s)=>{var r=s(2837),o=s(3417),n=s(2013);t.exports=function(t){return o(t)?n(t):r(t)}},2291:(t,e,s)=>{var r=s(5650),o=s(5111),n=s(3142),i=s(1187),a=r?r.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(n(e))return o(e,t)+"";if(i(e))return c?c.call(e):"";var s=e+"";return"0"==s&&1/e==-1/0?"-0":s}},2393:t=>{t.exports=function(){this.__data__=[],this.size=0}},2478:(t,e,s)=>{var r=s(4869),o=s(9454),n=s(7706);t.exports=function(t,e,s){return e==e?n(t,e,s):r(t,o,s)}},2532:(t,e,s)=>{var r=s(4715),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},2591:(t,e,s)=>{"use strict";var r,o=function(){var t={};return function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}t[e]=s}return t[e]}}(),n=[];function i(t){for(var e=-1,s=0;s<n.length;s++)if(n[s].identifier===t){e=s;break}return e}function a(t,e){for(var s={},r=[],o=0;o<t.length;o++){var a=t[o],c=e.base?a[0]+e.base:a[0],h=s[c]||0,l="".concat(c," ").concat(h);s[c]=h+1;var u=i(l),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(n[u].references++,n[u].updater(d)):n.push({identifier:l,updater:m(d,e),references:1}),r.push(l)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var n=s.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var h,l=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function u(t,e,s,r){var o=s?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var n=document.createTextNode(o),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(n,i[e]):t.appendChild(n)}}function d(t,e,s){var r=s.css,o=s.media,n=s.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,f=0;function m(t,e){var s,r,o;if(e.singleton){var n=f++;s=p||(p=c(e)),r=u.bind(null,s,n,!1),o=u.bind(null,s,n,!0)}else s=c(e),r=d.bind(null,s,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(s)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var s=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<s.length;r++){var o=i(s[r]);n[o].references--}for(var c=a(t,e),h=0;h<s.length;h++){var l=i(s[h]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}s=c}}}},2837:t=>{t.exports=function(t){return t.split("")}},2945:t=>{var e=/\s/;t.exports=function(t){for(var s=t.length;s--&&e.test(t.charAt(s)););return s}},3142:t=>{var e=Array.isArray;t.exports=e},3305:(t,e,s)=>{var r=s(4497);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},3401:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});var r=s(935),o=s.n(r)()(!1);o.push([t.id,"html, body {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n:focus-visible {\r\n  outline: none;\r\n}\r\n\r\n.ridge-composite {\r\n    position: relative;\r\n}\r\n\r\n.ridge-composite > .ridge-element {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\n.ridge-is-full {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.ridge-is-hidden {\r\n    display: none;\r\n}\r\n\r\n.ridge-element:has(.ridge-overlay) {\r\n  position: relative;\r\n}\r\n.ridge-overlay {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.status-Loading {\r\n    background: linear-gradient(90deg,#2e32380d 25%,#2e323817 44%,#2e32380d 88%);\r\n    background-size: 400% 100%;\r\n    animation: skeleton-loading 3s ease infinite;\r\n    animation-fill-mode: forwards;\r\n}\r\n\r\n\r\n.status-not-found, .status-render-error, .status-Circular, .status-Page-not-found {\r\n    position: relative;\r\n    font-size: 9px;\r\n    background-color: rgba(253, 185, 165, .3);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-position: center;\r\n    overflow: hidden;\r\n}\r\n\r\n.status-not-found::before, .status-Circular::before, .status-Page-not-found::before {  \r\n    content: \"内容未找到\";  \r\n    position: absolute;  \r\n    padding-left: 26px;\r\n    left: 50%;\r\n    top: 50%;  \r\n    transform: translate(-50%, -50%);\r\n    font-size: 14px;  \r\n    z-index: -1;  \r\n    background-size: 22px;\r\n    background-repeat: no-repeat;\r\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1em' height='1em' viewBox='0 0 24 24'%3E%3Cpath fill='%23e86868' d='M11.953 2C6.465 2 2 6.486 2 12s4.486 10 10 10s10-4.486 10-10S17.493 2 11.953 2M13 17h-2v-2h2zm0-4h-2V7h2z'/%3E%3C/svg%3E\");\r\n    pointer-events: none; /* 防止背景文字影响鼠标事件 */  \r\n}  \r\n\r\n.status-Circular::before {\r\n    content: \"循环渲染异常\"; \r\n}\r\n.status-Page-not-found::before {\r\n    content: \"页面未找到\";  \r\n}\r\n\r\n.ridge-composite:not(.is-edit) .is-store {\r\n    display: none;\r\n}\r\n@keyframes skeleton-loading {\r\n    0% {\r\n        background-position: 100% 50%\r\n    }\r\n\r\n    to {\r\n        background-position: 0 50%\r\n    }\r\n}",""]);const n=o},3417:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},3422:(t,e,s)=>{var r=s(7073),o=s(6285),n=Object.prototype.hasOwnProperty;t.exports=function(t,e,s){var i=t[e];n.call(t,e)&&o(i,s)&&(void 0!==s||e in t)||r(t,e,s)}},3501:t=>{t.exports=function(t,e,s){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(s=s>o?o:s)<0&&(s+=o),o=e>s?0:s-e>>>0,e>>>=0;for(var n=Array(o);++r<o;)n[r]=t[r+e];return n}},3526:(t,e,s)=>{var r=s(3142),o=s(5187),n=s(6493),i=s(5243);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:n(i(t))}},3640:(t,e,s)=>{var r=s(4187),o=s(5881),n=s(9850),i=RegExp("['’]","g");t.exports=function(t){return function(e){return r(n(o(e).replace(i,"")),t,"")}}},3655:(t,e,s)=>{var r=s(7379),o=s(1580);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},3964:(t,e,s)=>{var r=s(7034);t.exports=function(t,e){var s=this.__data__,o=r(s,t);return o<0?(++this.size,s.push([t,e])):s[o][1]=e,this}},4066:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},4187:t=>{t.exports=function(t,e,s,r){var o=-1,n=null==t?0:t.length;for(r&&n&&(s=t[++o]);++o<n;)s=e(s,t[o],o,t);return s}},4326:(t,e,s)=>{var r=s(8931),o=s(3417),n=s(2237),i=s(5243);t.exports=function(t){return function(e){e=i(e);var s=o(e)?n(e):void 0,a=s?s[0]:e.charAt(0),c=s?r(s,1).join(""):e.slice(1);return a[t]()+c}}},4497:(t,e,s)=>{var r=s(4715)(Object,"create");t.exports=r},4699:(t,e,s)=>{var r=s(2591),o=s(3401);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.id,o,""]]);r(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},4700:(t,e,s)=>{var r=s(9067);t.exports=function(t,e){var s=t.__data__;return r(e)?s["string"==typeof e?"string":"hash"]:s.map}},4715:(t,e,s)=>{var r=s(9624),o=s(155);t.exports=function(t,e){var s=o(t,e);return r(s)?s:void 0}},4732:(t,e,s)=>{var r=s(4700);t.exports=function(t){return r(this,t).has(t)}},4759:(t,e,s)=>{var r,o=s(1950),n=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!n&&n in t}},4869:t=>{t.exports=function(t,e,s,r){for(var o=t.length,n=s+(r?1:-1);r?n--:++n<o;)if(e(t[n],n,t))return n;return-1}},4911:function(t,e){var s,r;void 0===(r="function"==typeof(s=function(){var t=function(){},e={},s={},r={};function o(t,e){if(t){var o=r[t];if(s[t]=e,o)for(;o.length;)o[0](t,e),o.splice(0,1)}}function n(e,s){e.call&&(e={success:e}),s.length?(e.error||t)(s):(e.success||t)(e)}function i(e,s,r,o){var n,a,c,h=document,l=r.async,u=(r.numRetries||0)+1,d=r.before||t,p=e.replace(/[\?|#].*$/,""),f=e.replace(/^(css|img|module|nomodule)!/,"");if(o=o||0,/(^css!|\.css$)/.test(p))(c=h.createElement("link")).rel="stylesheet",c.href=f,(n="hideFocus"in c)&&c.relList&&(n=0,c.rel="preload",c.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p))(c=h.createElement("img")).src=f;else if((c=h.createElement("script")).src=f,c.async=void 0===l||l,a="noModule"in c,/^module!/.test(p)){if(!a)return s(e,"l");c.type="module"}else if(/^nomodule!/.test(p)&&a)return s(e,"l");c.onload=c.onerror=c.onbeforeload=function(t){var a=t.type[0];if(n)try{c.sheet.cssText.length||(a="e")}catch(t){18!=t.code&&(a="e")}if("e"==a){if((o+=1)<u)return i(e,s,r,o)}else if("preload"==c.rel&&"style"==c.as)return c.rel="stylesheet";s(e,a,t.defaultPrevented)},!1!==d(e,c)&&h.head.appendChild(c)}function a(t,s,r){var a,c;if(s&&s.trim&&(a=s),c=(a?r:s)||{},a){if(a in e)throw"LoadJS";e[a]=!0}function h(e,s){!function(t,e,s){var r,o,n=(t=t.push?t:[t]).length,a=n,c=[];for(r=function(t,s,r){if("e"==s&&c.push(t),"b"==s){if(!r)return;c.push(t)}--n||e(c)},o=0;o<a;o++)i(t[o],r,s)}(t,(function(t){n(c,t),e&&n({success:e,error:s},t),o(a,t)}),c)}if(c.returnPromise)return new Promise(h);h()}return a.ready=function(t,e){return function(t,e){t=t.push?t:[t];var o,n,i,a=[],c=t.length,h=c;for(o=function(t,s){s.length&&a.push(t),--h||e(a)};c--;)n=t[c],(i=s[n])?o(n,i):(r[n]=r[n]||[]).push(o)}(t,(function(t){n(e,t)})),a},a.done=function(t){o(t,[])},a.reset=function(){e={},s={},r={}},a.isDefined=function(t){return t in e},a})?s.apply(e,[]):s)||(t.exports=r)},4967:(t,e,s)=>{var r="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g;t.exports=r},5071:(t,e,s)=>{var r=s(7034);t.exports=function(t){return r(this.__data__,t)>-1}},5098:(t,e,s)=>{var r=s(3305),o=s(9361),n=s(1112),i=s(5276),a=s(7452);function c(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},5111:t=>{t.exports=function(t,e){for(var s=-1,r=null==t?0:t.length,o=Array(r);++s<r;)o[s]=e(t[s],s,t);return o}},5187:(t,e,s)=>{var r=s(3142),o=s(1187),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var s=typeof t;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=t&&!o(t))||i.test(t)||!n.test(t)||null!=e&&t in Object(e)}},5243:(t,e,s)=>{var r=s(2291);t.exports=function(t){return null==t?"":r(t)}},5276:(t,e,s)=>{var r=s(4497),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},5485:(t,e,s)=>{var r=s(4326)("toUpperCase");t.exports=r},5650:(t,e,s)=>{var r=s(8942).Symbol;t.exports=r},5681:(t,e,s)=>{var r=s(4700);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},5813:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},5881:(t,e,s)=>{var r=s(9968),o=s(5243),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=o(t))&&t.replace(n,r).replace(i,"")}},6005:(t,e,s)=>{var r=s(5243),o=s(5485);t.exports=function(t){return o(r(t).toLowerCase())}},6040:(t,e,s)=>{var r=s(1187);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6123:(t,e,s)=>{var r=s(7923);t.exports=function(t,e,s){var o=null==t?void 0:r(t,e);return void 0===o?s:o}},6285:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6403:(t,e,s)=>{var r=s(2945),o=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(o,""):t}},6493:(t,e,s)=>{var r=s(6853),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,s,r,o){e.push(r?o.replace(n,"$1"):s||t)})),e}));t.exports=i},6853:(t,e,s)=>{var r=s(9011);t.exports=function(t){var e=r(t,(function(t){return 500===s.size&&s.clear(),t})),s=e.cache;return e}},7034:(t,e,s)=>{var r=s(6285);t.exports=function(t,e){for(var s=t.length;s--;)if(r(t[s][0],e))return s;return-1}},7073:(t,e,s)=>{var r=s(2532);t.exports=function(t,e,s){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s}},7144:(t,e,s)=>{var r=s(7034);t.exports=function(t){var e=this.__data__,s=r(e,t);return s<0?void 0:e[s][1]}},7250:t=>{var e=1e3,s=60*e,r=60*s,o=24*r,n=7*o;function i(t,e,s,r){var o=e>=1.5*s;return Math.round(t/s)+" "+r+(o?"s":"")}t.exports=function(t,a){a=a||{};var c,h,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*n;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*s;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===l&&isFinite(t))return a.long?(c=t,(h=Math.abs(c))>=o?i(c,h,o,"day"):h>=r?i(c,h,r,"hour"):h>=s?i(c,h,s,"minute"):h>=e?i(c,h,e,"second"):c+" ms"):function(t){var n=Math.abs(t);return n>=o?Math.round(t/o)+"d":n>=r?Math.round(t/r)+"h":n>=s?Math.round(t/s)+"m":n>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},7379:(t,e,s)=>{var r=s(5650),o=s(8870),n=s(9005),i=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":i&&i in Object(t)?o(t):n(t)}},7452:(t,e,s)=>{var r=s(4497);t.exports=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},7655:(t,e,s)=>{var r=s(3422),o=s(3526),n=s(9632),i=s(1580),a=s(6040);t.exports=function(t,e,s,c){if(!i(t))return t;for(var h=-1,l=(e=o(e,t)).length,u=l-1,d=t;null!=d&&++h<l;){var p=a(e[h]),f=s;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(h!=u){var m=d[p];void 0===(f=c?c(m,p,d):void 0)&&(f=i(m)?m:n(e[h+1])?[]:{})}r(d,p,f),d=d[p]}return t}},7706:t=>{t.exports=function(t,e,s){for(var r=s-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},7891:(t,e,s)=>{t.exports=function(t){function e(t){let s,o,n,i=null;function a(...t){if(!a.enabled)return;const r=a,o=Number(new Date),n=o-(s||o);r.diff=n,r.prev=s,r.curr=o,s=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let i=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,o)=>{if("%%"===s)return"%";i++;const n=e.formatters[o];if("function"==typeof n){const e=t[i];s=n.call(r,e),t.splice(i,1),i--}return s})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==e.namespaces&&(o=e.namespaces,n=e.enabled(t)),n),set:t=>{i=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,s){const r=e(this.namespace+(void 0===s?":":s)+t);return r.log=this.log,r}function o(t,e){let s=0,r=0,o=-1,n=0;for(;s<t.length;)if(r<e.length&&(e[r]===t[s]||"*"===e[r]))"*"===e[r]?(o=r,n=s,r++):(s++,r++);else{if(-1===o)return!1;r=o+1,n++,s=n}for(;r<e.length&&"*"===e[r];)r++;return r===e.length}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names,...e.skips.map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){e.save(t),e.namespaces=t,e.names=[],e.skips=[];const s=("string"==typeof t?t:"").trim().replace(" ",",").split(",").filter(Boolean);for(const t of s)"-"===t[0]?e.skips.push(t.slice(1)):e.names.push(t)},e.enabled=function(t){for(const s of e.skips)if(o(t,s))return!1;for(const s of e.names)if(o(t,s))return!0;return!1},e.humanize=s(7250),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((s=>{e[s]=t[s]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return e.colors[Math.abs(s)%e.colors.length]},e.enable(e.load()),e}},7905:(t,e,s)=>{var r=s(2478);t.exports=function(t,e){for(var s=-1,o=t.length;++s<o&&r(e,t[s],0)>-1;);return s}},7923:(t,e,s)=>{var r=s(3526),o=s(6040);t.exports=function(t,e){for(var s=0,n=(e=r(e,t)).length;null!=t&&s<n;)t=t[o(e[s++])];return s&&s==n?t:void 0}},8250:(t,e,s)=>{var r=s(9753),o=s(5681),n=s(88),i=s(4732),a=s(9068);function c(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=n,c.prototype.has=i,c.prototype.set=a,t.exports=c},8774:(t,e,s)=>{var r=s(2478);t.exports=function(t,e){for(var s=t.length;s--&&r(e,t[s],0)>-1;);return s}},8870:(t,e,s)=>{var r=s(5650),o=Object.prototype,n=o.hasOwnProperty,i=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=n.call(t,a),s=t[a];try{t[a]=void 0;var r=!0}catch(t){}var o=i.call(t);return r&&(e?t[a]=s:delete t[a]),o}},8931:(t,e,s)=>{var r=s(3501);t.exports=function(t,e,s){var o=t.length;return s=void 0===s?o:s,!e&&s>=o?t:r(t,e,s)}},8942:(t,e,s)=>{var r=s(4967),o="object"==typeof self&&self&&self.Object===Object&&self,n=r||o||Function("return this")();t.exports=n},9005:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9011:(t,e,s)=>{var r=s(8250);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var s=function(){var r=arguments,o=e?e.apply(this,r):r[0],n=s.cache;if(n.has(o))return n.get(o);var i=t.apply(this,r);return s.cache=n.set(o,i)||n,i};return s.cache=new(o.Cache||r),s}o.Cache=r,t.exports=o},9067:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9068:(t,e,s)=>{var r=s(4700);t.exports=function(t,e){var s=r(this,t),o=s.size;return s.set(t,e),this.size+=s.size==o?0:1,this}},9361:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},9454:t=>{t.exports=function(t){return t!=t}},9546:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},9624:(t,e,s)=>{var r=s(3655),o=s(4759),n=s(1580),i=s(4066),a=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,l=c.toString,u=h.hasOwnProperty,d=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!n(t)||o(t))&&(r(t)?d:a).test(i(t))}},9632:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,s){var r=typeof t;return!!(s=null==s?9007199254740991:s)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<s}},9677:(t,e,s)=>{var r=s(6005),o=s(3640)((function(t,e,s){return e=e.toLowerCase(),t+(s?r(e):e)}));t.exports=o},9753:(t,e,s)=>{var r=s(5098),o=s(1386),n=s(9770);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(n||o),string:new r}}},9770:(t,e,s)=>{var r=s(4715)(s(8942),"Map");t.exports=r},9850:(t,e,s)=>{var r=s(9546),o=s(5813),n=s(5243),i=s(482);t.exports=function(t,e,s){return t=n(t),void 0===(e=s?void 0:e)?o(t)?i(t):r(t):t.match(e)||[]}},9968:(t,e,s)=>{var r=s(1035)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=r}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={id:r,exports:{}};return t[r].call(n.exports,n,n.exports,s),n.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nc=void 0,(()=>{"use strict";s(4699);var t=s(124),e=s.n(t),r=s(4911),o=s.n(r),n=s(9011),i=s.n(n),a=s(1237),c=s.n(a);let h=t=>crypto.getRandomValues(new Uint8Array(t));s(9677),s(107);const l=((t,e=21)=>((t,e,s)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,o=-~(1.6*r*e/t.length);return(n=e)=>{let i="";for(;;){let e=s(o),a=o;for(;a--;)if(i+=t[e[a]&r]||"",i.length===n)return i}}})("1234567890abcdefghijklmnopqrstuvwxyz",e,h))(0,10),u=async t=>{const e=document.createElement("script"),s="ridge-store-"+l(10),{updatedSourceCode:r,importStatements:o}=(t=>{const e=[];let s=t;const r=/import\s+.*?\s+from\s+(['"])(.*?)(['"])/gm;let o;for(;o=r.exec(t);){const t=o[2];e.push(t),s=s.replace(o[0],"")}return{sourceCode:t,updatedSourceCode:s,importStatements:e}})(t),n=`(function() {\n    ${r.replace("export default",'window["'+s+'"] =')}\n  })()`;return e.textContent=n,new Promise(((t,n)=>{try{window.onerror=t=>{try{document.head.removeChild(e),n(t)}catch(t){}},document.head.append(e);const i=window[s];i.jsContent=r,i.dependencies=o,i?t(i):n(new Error("not"))}catch(t){n(t)}finally{delete window[s],window.onerror=null,document.head.removeChild(e)}}))},d=e()("ridge:loader"),p=class{constructor({baseUrl:t,loadPropControl:e}){this.baseUrl=t.replace(/\/$/,""),this.loadPropControl=e,d("RidgeLoader baseUrl: "+this.baseUrl),this.loadedFonts=[],this.themeUrls={},this.getPackageJSON=i()(this._getPackageJSON),this.loadComponent=i()(this._loadComponent),this.loadScript=i()(this._loadScript),this.loadExternal=i()(this._loadExternal),this.loadJSON=i()(this.loadJSON),this.loadStoreScript=i()(this.loadStoreScript),this.loadJsModule=u,this.confirmPackageDependencies=i()(this._confirmPackageDependencies)}getComponentUrl({packageName:t,path:e}){return`${this.baseUrl}/${t}/${e}`}getPackageJSONUrl(t){return`${this.baseUrl}/${t}/package.json`}async _loadComponent(t){let e,s;if("object"==typeof t)e=t.packageName,s=t.path;else{const r=t.split("/");r[0].startsWith("@")?(e=r.splice(0,2).join("/"),s=r.join("/")):(e=r.splice(0,1).join("/"),s=r.join("/"))}const r=await this.doLoadComponent({packageName:e,path:s});return r&&(r.componentPath=t),r}async doLoadComponent({packageName:t,path:e}){d("doLoadComponent",t,e);const s=await this.getPackageJSON(t);if(null==s)return null;await this.confirmPackageDependencies(t);let r=null;return s.ridgeDist?(await this.loadScript(`${s.name}/${s.ridgeDist}`),r=window[s.name][e]):r=await this.loadComponentScript({packageName:t,path:e}),r&&await this.prepareComponent(r,{packageName:t,path:e},s),r}async prepareComponent(t,{packageName:e,path:s}){if(t.packageName=e,t.path=s,t.title=t.title||t.label,Array.isArray(t.externals))for(const s of t.externals)s.startsWith("/")?await this.loadScript(s):await this.loadScript(e+"/"+s);if(t.component){if("function"==typeof t.component&&"AsyncFunction"===t.component.constructor.name&&(t.component=(await t.component()).default),this.loadPropControl)for(const e of t.props||[])e&&e.control&&"function"==typeof e.control&&e.control.toString().startsWith("()")&&(e.controlComponent=(await e.control()).default),e.options&&"function"==typeof e.options&&e.options.toString().startsWith("()")&&(e.optionsLoads=await e.options())}else d("组件 Component定义未加载到",t)}on(t,e){this.eventCallbacks.push({eventName:t,callback:e})}async loadComponentScript({packageName:t,path:e}){await this.loadScript(`${t}/build/${e}.js`);const s=`${t}/${e}`;return window[s]?window[s].default:null}removeCss(t){if(!t)return;const e=Array.from(document.head.children).filter((t=>"link"===t.tagName.toLowerCase()));for(const s of e)s.href.endsWith(t)&&document.head.removeChild(s)}async loadCss(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("HEAD")[0].appendChild(e)}getFinalCDNUrl(t){let e=t.replace(/\/\//g,"/");e.startsWith("/")||(e="/"+e),e=this.baseUrl+e,e.startsWith("/")||e.indexOf("")}async _loadScript(t){if(null!=t)try{let e=t.replace(/\/\//g,"/");if(e.startsWith("/")||(e="/"+e),Array.from(document.querySelectorAll("script")).find((t=>t.src&&t.src.endsWith(e)))||Array.from(document.querySelectorAll("link")).find((t=>t.href&&t.href.endsWith(e))))return d("Script loaded: ",e),e;const s=this.baseUrl+e;return d("_loadScript:"+s),await o()(s,{returnPromise:!0,before:function(t,e){e.crossOrigin=!0}}),e}catch(e){console.error("JS Load Error:",`${t}`)}}async _getPackageJSON(t){d("getPackageJSON",t);const e=this.getPackageJSONUrl(t);try{return await this.fetchJSON(e)}catch(t){return d("NPM Package Not Loaded:",e),null}}async _confirmPackageDependencies(t){d("_confirmPackageDependencies",t);const e=await this.getPackageJSON(t);if(null==e)return;const s=Object.keys(e.dependencies||{});for(const t of s)await this.loadExternal(t);const r=e.externals||e.prepares,o=[];if(Array.isArray(r))for(const t of r)t.startsWith("/")?o.push(await this.loadScript(t)):o.push(await this.loadScript(e.name+"/"+t));await Promise.allSettled(o),window.ridgeTheme&&window.ridgeTheme[t]?this.loadPackageTheme(t,window.ridgeTheme[t]):e.themes&&this.loadPackageTheme(t,e.themes.default)}async loadPackageTheme(t,e){this.themeUrls[t]&&this.removeCss(this.themeUrls[t]),this.loadCss(this.baseUrl+"/"+e),this.themeUrls[t]=e}async _loadExternal(t){d("_loadExternal",t);const e=c().externals.filter((e=>e.module===t))[0];if(e){if(d("Found External Package",e),e.root&&window[e.root])return;if(e.dependencies)for(const t of e.dependencies)await this.loadExternal(t);if(Array.isArray(e.dist)){const t=[];for(const s of e.dist)t.push(this.loadScript(s));await Promise.allSettled(t)}else"string"==typeof e.dist&&await this.loadScript(e.dist)}}async loadStoreScript(t){return(async t=>{try{const e=await window.fetch(t),s=await e.text();return u(s)}catch(t){return null}})(t)}async fetchJSON(t){try{const e=await window.fetch(t);return e.ok?await e.json():null}catch(t){return null}}async loadJSON(t){return this.fetchJSON(`${this.baseUrl}/${t.replace(/\/\//g,"/")}`)}};class f extends Error{response;request;options;constructor(t,e,s){const r=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super(`Request failed with ${r?`status code ${r}`:"an unknown error"}: ${e.method} ${e.url}`),this.name="HTTPError",this.response=t,this.request=e,this.options=s}}class m extends Error{request;constructor(t){super(`Request timed out: ${t.method} ${t.url}`),this.name="TimeoutError",this.request=t}}const g=t=>null!==t&&"object"==typeof t,y=(...t)=>{for(const e of t)if((!g(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return C({},...t)},b=(t={},e={})=>{const s=new globalThis.Headers(t),r=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[t,e]of o.entries())r&&"undefined"===e||void 0===e?s.delete(t):s.set(t,e);return s};function v(t,e,s){return Object.hasOwn(e,s)&&void 0===e[s]?[]:C(t[s]??[],e[s]??[])}const w=(t={},e={})=>({beforeRequest:v(t,e,"beforeRequest"),beforeRetry:v(t,e,"beforeRetry"),afterResponse:v(t,e,"afterResponse"),beforeError:v(t,e,"beforeError")}),C=(...t)=>{let e={},s={},r={};for(const o of t)if(Array.isArray(o))Array.isArray(e)||(e=[]),e=[...e,...o];else if(g(o)){for(let[t,s]of Object.entries(o))g(s)&&t in e&&(s=C(e[t],s)),e={...e,[t]:s};g(o.hooks)&&(r=w(r,o.hooks),e.hooks=r),g(o.headers)&&(s=b(s,o.headers),e.headers=s)}return e},x=(()=>{let t=!1,e=!1;const s="function"==typeof globalThis.ReadableStream,r="function"==typeof globalThis.Request;if(s&&r)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")}catch(t){if(t instanceof Error&&"unsupported BodyInit type"===t.message)return!1;throw t}return t&&!e})(),S="function"==typeof globalThis.AbortController,_="function"==typeof globalThis.ReadableStream,P="function"==typeof globalThis.FormData,j=["get","post","put","patch","head","delete"],E={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},O=2147483647,R=Symbol("stop"),k={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,fetch:!0},A={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},N=t=>j.includes(t)?t.toUpperCase():t,F={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3},U=(t={})=>{if("number"==typeof t)return{...F,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...F,...t}};class D{static create(t,e){const s=new D(t,e),r=async()=>{if("number"==typeof s._options.timeout&&s._options.timeout>O)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await s._fetch();for(const e of s._options.hooks.afterResponse){const r=await e(s.request,s._options,s._decorateResponse(t.clone()));r instanceof globalThis.Response&&(t=r)}if(s._decorateResponse(t),!t.ok&&s._options.throwHttpErrors){let e=new f(t,s.request,s._options);for(const t of s._options.hooks.beforeError)e=await t(e);throw e}if(s._options.onDownloadProgress){if("function"!=typeof s._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!_)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(t.clone(),s._options.onDownloadProgress)}return t},o=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(r):r();for(const[t,r]of Object.entries(E))o[t]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||r);const n=await o;if("json"===t){if(204===n.status)return"";if(0===(await n.clone().arrayBuffer()).byteLength)return"";if(e.parseJson)return e.parseJson(await n.text())}return n[t]()};return o}request;abortController;_retryCount=0;_input;_options;constructor(t,e={}){if(this._input=t,this._options={...e,headers:b(this._input.headers,e.headers),hooks:w({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:N(e.method??this._input.method??"GET"),prefixUrl:String(e.prefixUrl||""),retry:U(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:e.timeout??1e4,fetch:e.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(S){this.abortController=new globalThis.AbortController;const t=this._options.signal??this._input.signal;t?.aborted&&this.abortController.abort(t?.reason),t?.addEventListener("abort",(()=>{this.abortController.abort(t.reason)})),this._options.signal=this.abortController.signal}if(x&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(P&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,{...this.request}),this._options)}}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof m)throw t;if(t instanceof f){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const e=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=1e3*Number(e);Number.isNaN(t)?t=Date.parse(e)-Date.now():t>=Date.parse("2024-01-01")&&(t-=Date.now());const s=this._options.retry.maxRetryAfter??t;return t<s?t:s}if(413===t.response.status)throw t}const e=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,e)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const s=Math.min(this._calculateRetryDelay(e),O);if(this._retryCount<1)throw e;await async function(t,{signal:e}){return new Promise(((s,r)=>{function o(){clearTimeout(n),r(e.reason)}e&&(e.throwIfAborted(),e.addEventListener("abort",o,{once:!0}));const n=setTimeout((()=>{e?.removeEventListener("abort",o),s()}),t)}))}(s,{signal:this._options.signal});for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===R)return;return this._retry(t)}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}const t=((t,e)=>{const s={};for(const r in e)r in A||r in k||r in t||(s[r]=e[r]);return s})(this.request,this._options),e=this.request;return this.request=e.clone(),!1===this._options.timeout?this._options.fetch(e,t):async function(t,e,s,r){return new Promise(((o,n)=>{const i=setTimeout((()=>{s&&s.abort(),n(new m(t))}),r.timeout);r.fetch(t,e).then(o).catch(n).then((()=>{clearTimeout(i)}))}))}(e,t,this.abortController,this._options)}_stream(t,e){const s=Number(t.headers.get("content-length"))||0;let r=0;return 204===t.status?(e&&e({percent:1,totalBytes:s,transferredBytes:r},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(o){const n=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array),await async function t(){const{done:i,value:a}=await n.read();i?o.close():(e&&(r+=a.byteLength,e({percent:0===s?0:r/s,transferredBytes:r,totalBytes:s},a)),o.enqueue(a),await t())}()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}const T=t=>{const e=(e,s)=>D.create(e,y(t,s));for(const s of j)e[s]=(e,r)=>D.create(e,y(t,r,{method:s}));return e.create=t=>T(y(t)),e.extend=e=>("function"==typeof e&&(e=e(t??{})),T(y(t,e))),e.stop=R,e},L=T(),M=(Symbol(),Symbol()),I=Object.getPrototypeOf,J=new WeakMap,W=(t,e=!0)=>{J.set(t,e)},$=t=>"object"==typeof t&&null!==t,z=new WeakMap,q=new WeakSet,[B]=((t=Object.is,e=(t,e)=>new Proxy(t,e),s=t=>$(t)&&!q.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer),r=t=>{switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t}},o=new WeakMap,n=(t,e,s=r)=>{const i=o.get(t);if((null==i?void 0:i[0])===e)return i[1];const a=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return W(a,!0),o.set(t,[e,a]),Reflect.ownKeys(t).forEach((e=>{if(Object.getOwnPropertyDescriptor(a,e))return;const r=Reflect.get(t,e),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,e),i={value:r,enumerable:o,configurable:!0};if(q.has(r))W(r,!1);else if(r instanceof Promise)delete i.value,i.get=()=>s(r);else if(z.has(r)){const[t,e]=z.get(r);i.value=n(t,e(),s)}Object.defineProperty(a,e,i)})),Object.preventExtensions(a)},i=new WeakMap,a=[1,1],c=r=>{if(!$(r))throw new Error("object required");const o=i.get(r);if(o)return o;let h=a[0];const l=new Set,u=(t,e=++a[0])=>{h!==e&&(h=e,l.forEach((s=>s(t,e))))};let d=a[1];const p=t=>(e,s)=>{const r=[...e];r[1]=[t,...r[1]],u(r,s)},f=new Map,m=t=>{var e;const s=f.get(t);s&&(f.delete(t),null==(e=s[1])||e.call(s))},g=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r)),y=e(g,{deleteProperty(t,e){const s=Reflect.get(t,e);m(e);const r=Reflect.deleteProperty(t,e);return r&&u(["delete",[e],s]),r},set(e,r,o,n){const a=Reflect.has(e,r),h=Reflect.get(e,r,n);if(a&&(t(h,o)||i.has(o)&&t(h,i.get(o))))return!0;var d;m(r),$(o)&&(o=(t=>t&&(J.has(t)?J.get(t):I(t)===Object.prototype||I(t)===Array.prototype))(d=o)&&d[M]||null||o);let g=o;if(o instanceof Promise)o.then((t=>{o.status="fulfilled",o.value=t,u(["resolve",[r],t])})).catch((t=>{o.status="rejected",o.reason=t,u(["reject",[r],t])}));else{!z.has(o)&&s(o)&&(g=c(o));const t=!q.has(g)&&z.get(g);t&&((t,e)=>{if(f.has(t))throw new Error("prop listener already exists");if(l.size){const s=e[3](p(t));f.set(t,[e,s])}else f.set(t,[e])})(r,t)}return Reflect.set(e,r,g,n),u(["set",[r],o,h]),!0}});i.set(r,y);const b=[g,(t=++a[1])=>(d===t||l.size||(d=t,f.forEach((([e])=>{const s=e[1](t);s>h&&(h=s)}))),h),n,t=>(l.add(t),1===l.size&&f.forEach((([t,e],s)=>{if(e)throw new Error("remove already exists");const r=t[3](p(s));f.set(s,[t,r])})),()=>{l.delete(t),0===l.size&&f.forEach((([t,e],s)=>{e&&(e(),f.set(s,[t]))}))})];return z.set(y,b),Reflect.ownKeys(r).forEach((t=>{const e=Object.getOwnPropertyDescriptor(r,t);"value"in e&&(y[t]=r[t],delete e.value,delete e.writable),Object.defineProperty(g,t,e)})),y})=>[c,z,q,t,e,s,r,o,n,i,a])();function V(t={}){return B(t)}var H=s(1263),Z=s.n(H),G=s(6123),X=s.n(G);const Y=new Map,K=e()("ridge:store"),Q=e()("ridge:store-error"),tt=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){return t}};class et{constructor(t,e){this.module=t,this.composite=e,this.watchers={"*":new Set},this.state={},this.globals={},this.context=new Proxy(this,{get:function(t,e){switch(e){case"http":return L;case"composite":return t.composite;case"emit":return(e,s)=>{t.composite.emit(e,tt(s))};case"setState":return e=>{Object.assign(t.state,e)};case"properties":return t.properties;case"state":return t.state;case"scope":return;default:if(void 0!==t.state[e])return t.computedUsedState&&t.computedUsedState.push(e),t.state[e];if(t.module.actions&&t.module.actions[e])return t.module.actions[e];if(t.module.computed&&t.module.computed[e]){if("function"==typeof t.module.computed[e])return t.module.computed[e].call(t.context);if("function"==typeof t.module.computed[e].get)return t.module.computed[e].get.call(t.context)}else{if(void 0!==t.globals[e])return t.globals[e];if(window[e])return window[e]}}},set:function(t,e,s){return void 0!==t.state[e]?t.state[e]=s:t.globals[e]=s,!0}}),this.scheduledJobs=new Set}async initStore(t,s){if(this.properties=t,this.globalVariables=s,"function"==typeof this.module.state)try{this.state=V(this.module.state(t))}catch(t){console.error("initStore Error",t)}else"object"==typeof this.module.state?this.state=V(tt(this.module.state)):this.state=V({});for(const t of this.module.properties||[])null==this.properties[t.name]&&null!=t.value&&(this.properties[t.name]=t.value);if(this.module.externals)if(Array.isArray(this.module.externals))for(const t of this.module.externals)await this.composite.context.loadScript(t);else if("string"==typeof this.module.externals)await this.composite.context.loadScript(this.module.externals);else for(const t of Object.keys(this.module.externals))await this.composite.context.loadScript(this.module.externals[t]);if(this.state&&function(t,e){const s=z.get(t);let r;s||console.warn("Please use proxy object");const o=[],n=s[3];let i=!1;n((t=>{o.push(t),r||(r=Promise.resolve().then((()=>{r=void 0,i&&e(o.splice(0))})))}));i=!0}(this.state,(t=>{this.onMutations(t)})),this.module.setup)try{const t=await async function(t,e){if(!e)return await t(),-1;const s=performance.now();return await t(),performance.now()-s}((async()=>{await this.module.setup.call(this.context,this.context)}),e().enabled);t>-1&&e()("Module Setup:",this.module.name,"Duration:",t+"ms"),this.storeSetUp=!0,this.flushScheduledJobs()}catch(t){console.error("Module Setup Error!",this.module,t)}}updateProps(t){this.properties=t;const e=[];for(const s in t)this.watchers[s]&&e.push(...this.watchers[s]),this.module.watch&&this.module.watch[s]&&this.module.watch[s].call(this.context,t[s],t);this.scheduleCallback(e),this.module.update&&this.module.update.call(this.context,t),this.flushScheduledJobs()}subscribe(t,e,s){const r=e.join(".");switch(t){case"state":case"prop":this.addWatchers(r,s);break;case"computed":if(this.module.computed&&this.module.computed[r])if(Array.isArray(this.module.computed[r].dependencies))for(const t of this.module.computed[r].dependencies)this.addWatchers(t,s);else 0===(this.module.computed[r].get||this.module.computed[r]).length&&this.addWatchers("*",s)}}addWatchers(t,e){null==this.watchers[t]&&(this.watchers[t]=new Set),this.watchers[t].add(e)}getValue(t,e,s){let r=null;if("state"===t)r=X()(this.state,e);else if("computed"===t){const t=[...s];t.push(function(t){const e=z.get(t);e||console.warn("Please use proxy object");const[s,r,o]=e;return o(s,r(),void 0)}(this.context.state));const o=this.module.computed[e];if(o){this.computedUsedState=[];try{"function"==typeof o?r=o.call(this.context,...t):"function"==typeof o.get&&(r=o.get.call(this.context,...t))}catch(t){console.error("getValue Error",t),this.storeSetUp&&console.error("ComputedError: ",o,s)}}}else if("prop"===t)return this.context.properties[e];return null!=r&&(r=tt(r)),r}dispatchChange(t,e,s,r){if("state"===t)Z()(this.state,e.split("."),s);else if("computed"===t&&this.module.computed&&"function"==typeof this.module.computed[e]?.set)try{this.module.computed[e]?.set.call(this.context,s,this.state,...r)}catch(t){Q("dispatchChange Error",t)}}doStoreAction(t,{scopedData:s,payload:r,eventArgs:o}){if(this.module.actions&&this.module.actions[t])try{const n=[];(function(t){if(Y.has(t))return Y.get(t);const e="function"==typeof t&&/^[^{]*=>/.test(t.toString());return Y.set(t,e),e})(this.module.actions[t])&&n.push(this.context),""!==o&&n.push(o),s&&s.length&&n.push(...s),null!=r&&(Array.isArray(r)?n.push(...r):n.push(r));const i=function(t,e){if(!e)return t(),-1;const s=performance.now();return t(),performance.now()-s}((()=>{const e=this.module.actions[t].call(this.context,...n);"object"==typeof e&&this.context.setState(e)}),e().enabled);i>-1&&e()("Action Dura",t,n,i)}catch(t){console.error("doStoreAction Error",t)}}onMutations(t){for(const e of t){const[t,s,r,o]=e;K("mutation",t,s.join("."),r,o),this.onStateChange(s,r,o)}this.flushScheduledJobs()}onStateChange(t,e,s){const r=t.join("."),o=[],n=new Set;this.watchers["*"]&&o.push(...this.watchers["*"]);const i=Object.keys(this.watchers);for(const t of i)(t.startsWith(r)||r.startsWith(t+".")||t===r)&&o.push(...this.watchers[t]);const a=Object.keys(this.module.watch||{});for(const t of a)(t.startsWith(r)||r.startsWith(t+".")||t===r)&&n.add(this.module.watch[t]);o.push(...Array.from(n).map((t=>()=>{t.call(this.context,s,e)}))),this.scheduleCallback(o)}scheduleCallback(t){for(const e of t)this.scheduledJobs.add(e)}flushScheduledJobs(){for(const t of this.scheduledJobs)try{t()}catch(t){console.error("job exec error",t)}this.scheduledJobs.clear()}destory(){this.module.destory&&this.module.destory.call(this.context)}}const st="Promote",rt="props",ot=e()("ridge:store");e()("ridge:store-error");class nt{constructor(t){this.composite=t,this.properties=t.properties,this.storeObjects={}}setProperties(t){this.properties=t;for(const e of Object.values(this.storeObjects))e.updateProps(t)}load(t,e){for(const s of Array.isArray(t)?t:[t])this.registerPageStore(s,e)}getStoreValue(t,e){const[s,r,...o]=t.split(".");return s===st&&r===rt?this.properties[o[0]]:this.storeObjects[s]?this.storeObjects[s].getValue(r,o.join("."),e):void 0}subscribe(t,e){if(t)try{const[s,r,...o]=t.split(".");ot("subscribe",t),this.storeObjects[s]&&this.storeObjects[s].subscribe(r,o,e)}catch(e){console.error("subscribe error",t,e)}}dispatchChange(t,e,s){const[r,o,...n]=t.split(".");this.storeObjects[r]&&this.storeObjects[r].dispatchChange(o,n.join("."),e,s)}doStoreAction(t,e,s){this.storeObjects[t]&&this.storeObjects[t].doStoreAction(e,s)}registerPageStore(t,e){if(ot("RegisterPageStore",t),!t.name)return void ot("Store Not Registered: No Name");const s=t.name;this.storeObjects[s]=new et(t,this.composite),this.storeObjects[s].initStore(e)}destory(){for(const t of Object.values(this.storeObjects))t.destory()}}class it{async mount(){}setOption(t){}updateProps(t){}layout(t){}invoke(t,e){}on(t,e){}destroy(){}}class at extends it{constructor(t,e={}){super(),this.JSXComponent=t,this.props=e,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref}mount(t){this.el=t,this.root=ReactDOM.createRoot(t),this.root.render(this.getRenderInstance())}getRenderInstance(){return React.createElement(this.JSXComponent,this.props)}on(t,e){Object.assign(this.props,{[t]:e}),this.root.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(t,e){if(this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t])return this.renderRef.current[t](...e||[])}hasMethod(t){return this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t]}setOption(t){this.updateProps(t)}updateProps(t){this.props=Object.assign({},t,{ref:this.props.ref}),this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps&&this.renderRef.current.updateProps(t),this.root.render(this.getRenderInstance())}layout(t){ReactDOM.render(React.createElement(this.JSXComponent,t),this.el)}destroy(){this.root.unmount(),this.renderRef&&(this.renderRef=null)}}class ct extends it{constructor(t,e={}){super(),this.VannilaComponent=t,this.props=e}mount(t){this.el=t,this.getRenderInstance().mount(t)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(t,e){this.instance.on(t,e)}invoke(t,e){if(this.getRenderInstance()[t])return this.getRenderInstance()[t].apply(this.getRenderInstance(),e)}hasMethod(t){return null!=this.getRenderInstance()[t]}setOption(t){this.updateProps(t)}updateProps(t){this.getRenderInstance().update(t)}layout(){this.getRenderInstance().layout()}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}const ht=t=>({scope:e}={})=>{class s extends React.Component{constructor(t){super(t),this.scope=t.scope,this.ref=React.createRef(),this.ridgeElement=null}componentDidMount(){this.props.scope?this.ridgeElement?(this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.forceUpdate()):(this.ridgeElement=this.props.element.clone(),this.ridgeElement.setScopedData(this.props.scope),this.ridgeElement.mount(this.ref.current)):(this.ridgeElement=this.props.element,this.ridgeElement.mount(this.ref.current))}componentWillUnmount(){}render(){return React.createElement("div",{ref:this.ref,style:{width:"100%",height:"100%"}})}}return React.createElement(s,{element:t,scope:e})},lt=class{async load(){}async mount(t){}setProperties(t){}unmount(){}invoke(){}setStatus(t,e){this.status=t,this.el&&this.el.classList.add("status-"+t)}getStatus(){return this.status}removeStatus(t){if(this.status=null,this.el)for(const e of this.el.classList)t?e==="status-"+t&&this.el.classList.remove(e):e.startsWith("status-")&&this.el.classList.remove(e)}},ut=(t,e,s)=>{const r=t.classList;let o=!1;for(let n=0;n<r.length;n++)if(r[n].startsWith(e+":")){o=!0;const i=r[n].substring(e.length+1);s?t.classList.remove(i):t.classList.add(i)}return o},dt=(t,e,s)=>{const r=t.querySelectorAll(".has-pseudo-"+e);for(const o of r)o.closest(".ridge-element")===t&&ut(o,e,s)},pt=(t,e)=>{const[s,r]=t.split(":");return r&&e.push(s),t},ft=e()("ridge:element");class mt extends lt{constructor({config:t,composite:e,componentDefinition:s}){super(),this.config=t,this.uuid="ins-"+l(8),this.composite=e,this.componentDefinition=s,this.properties={},this.events={},ft("create",this.config.id),this.onMounted((()=>{this.bindDOMEvents()}))}getId(){return this.config.id}getProperties(){return Object.assign({width:this.style.width,height:this.style.height,__composite:this.composite,visible:this.style.visible},this.config.props,this.events,this.properties,{children:this.children})}getConfig(){return this.config}getEl(){return this.el}getParent(){return this.parent}getScopedData(){const t=this.getParent(),e=t?t.getScopedData():[];return null==this.scopedData?e:[this.scopedData,...e]}setScopedData(t){this.scopedData=t}async load(t){if(this.componentDefinition||this.config.path&&(this.componentDefinition=await this.composite.context.loader.loadComponent(this.config.path)),this.componentDefinition){if(t&&this.config.props.children)for(const t of this.config.props.children){const e=this.composite.getNode(t);e&&await e.load(!0)}return!0}return this.setStatus("not-found"),!1}firstPaint(t){t&&(this.el=t),ft("el first paint",this.config.title,this),this.firstPainted=!0,this.setStatus("Loading"),this.el.setAttribute("ridge-title",this.config.title),this.el.setAttribute("ridge-mount","mounting"),this.style=Object.assign({},this.config.style),this.updateStyle()}async mount(t){if(t&&(this.el&&this.el!==t&&(ft("Do Unmount Before Mount"),this.unmount()),this.el=t),this.el&&(ft("mounting",this.config.id,this),this.el.ridgeNode=this,this.firstPainted||this.firstPaint(),this.forceUpdateStyle(),this.initializeEvents(),this.initSubscription(),this.componentDefinition||await this.load(),this.componentDefinition))try{this.updateConnectedProperties(),this.preparePropsBeforeRender(),this.createRenderer(),this.mounted&&this.mounted(),ft("mounted",this.config.id,this),this.el.setAttribute("ridge-mount","mounted"),this.removeStatus()}catch(t){console.error("ridge element mount error:",t)}}getIsMounted(){return this.isMounted}mounted(){this.mounteds&&this.mounteds.forEach((t=>t(this))),this.isMounted=!0}onMounted(t){!0===this.isMounted?t(this):(this.mounteds||(this.mounteds=[]),this.mounteds.push(t))}initChildren(){if(this.config.props.children&&null==this.children){this.children=[];for(const t of this.config.props.children){const e=this.composite.getNode(t);e&&(e.parent=this,this.children.push(e),e.initChildren())}}if(this.config.slots&&this.config.slots.length)for(const t of this.config.slots){const e=this.composite.getNode(t);e&&(e.parent=this,e.initChildren())}}initializeEvents(){this.config.propEx.value&&(this.events.input=t=>{this.composite.store.dispatchChange(this.config.propEx.value,t,this.getScopedData())},this.events.onChange=t=>{this.composite.store.dispatchChange(this.config.propEx.value,t,this.getScopedData())});for(const[t,e]of Object.entries(this.config.events??{}))this.events[t]=(...s)=>{if(Array.isArray(e)){for(const t of e)if(t.store&&t.method){const e={payload:s,scopedData:this.getScopedData(),eventArgs:t.payload};this.composite.store.doStoreAction(t.store,t.method,e)}}else"promoted"===e&&this.composite.emit(this.getId()+"-"+t,s)}}bindDOMEvents(){this.el.addEventListener("mouseenter",this.handleMouseOver),this.el.addEventListener("mouseleave",this.handleMouseOut),this.el.addEventListener("selected",(t=>{dt(t.target,"selected")})),this.el.addEventListener("unselected",(t=>{dt(t.target,"selected",!0)}))}initSubscription(){Object.values(this.config.styleEx).forEach((t=>{this.composite.store?.subscribe&&this.composite.store.subscribe(t,(()=>{this.forceUpdateStyle()}))})),Object.values(this.config.propEx).forEach((t=>{this.composite.store?.subscribe&&this.composite.store.subscribe(t,(()=>{this.forceUpdateProperty()}))}))}createRenderer(){if(null==this.componentDefinition)return null;const{type:t="vanilla"}=this.componentDefinition;try{switch(t){case"vanilla":this.renderer=new ct(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el);break;case"react":this.renderer=new at(this.componentDefinition.component,this.getProperties()),this.renderer.mount(this.el)}}catch(t){this.setStatus("render-error",{code:"R_ERR",error:t}),console.error("组件初始化渲染异常",this.componentDefinition,t)}}forceUpdateStyle(){this.updateConnectedStyle(),this.updateStyle()}forceUpdateProperty(){this.updateConnectedProperties(),this.updateProps()}forceUpdate(){this.forceUpdateStyle(),this.forceUpdateProperty()}updateProps(t){t&&Object.assign(this.properties,t),ft("updateProps",this.config.id,this.properties),this.renderer&&this.el&&"mounted"===this.el.getAttribute("ridge-mount")?this.properties.__isEdit?this.preparePropsBeforeRender().finally((()=>{this.renderUpdate()})):(this.preparePropsBeforeRender(),this.renderUpdate()):ft("updateProps umounted",this.getId(),this)}renderUpdate(){const t=this.getProperties();try{ft("updateProps",this.config.id,t),this.renderer.updateProps(t)}catch(e){ft("Render Error:",e,this,t)}}updateConnectedStyle(){if(this.composite.store)for(const t of Object.keys(this.config.styleEx||{}))null!=this.config.styleEx[t]&&""!==this.config.styleEx[t]&&(this.style[t]=this.composite.store.getStoreValue(this.config.styleEx[t],this.getScopedData()))}updateChildStyle(t){this.invoke("updateChildStyle",[t])}updateStyle(){this.el&&(this.el.setAttribute("component",this.config.path),this.el.setAttribute("ridge-id",this.config.id),this.el.setAttribute("ridge-title",this.config.title),this.el.classList.add("ridge-element"),!1===this.style.visible?this.el.classList.add("ridge-is-hidden"):this.el.classList.remove("ridge-is-hidden"),this.parent&&this.parent.updateChildStyle(this),this.invoke("onStyleUpdated",[this]),this.styleUpdated&&this.styleUpdated())}updateConnectedProperties(){if(this.composite.store)for(const[t,e]of Object.entries(this.config.propEx))if(null!=e&&""!==e)try{this.properties[t]=this.composite.store.getStoreValue(e,this.getScopedData())}catch(t){ft("updateConnectedProperties Fail",e,t)}}getSlotPropValue(t){return t?(t.parent=this,t.isSlot=!0,"react"===this.componentDefinition.type?ht(t):t):null}needPrepareProps(){}prepareSlotProperties(){}preparePropsBeforeRender(){if(!this.componentDefinition)return;let t=0;for(let e=0;e<(this.componentDefinition.props||[]).length;e++){const s=this.componentDefinition.props[e];if("image"===s.type||"file"===s.type){const t=this.config.props[s.name]||this.properties[s.name];null!=t&&""!==t&&(this.properties[s.name]=this.composite.getBlobUrl(t,this.composite.packageName))}else if("slot"===s.type){delete this.properties[s.name];const e=this.config.props[s.name];if(e){const t=this.composite.getNode(e);this.properties[s.name]=this.getSlotPropValue(t)}else if(Array.isArray(this.children)){for(const t of this.children)t.config.title===s.name&&(this.properties[s.name]=this.getSlotPropValue(t));if(null==this.properties[s.name]){const e=this.children[t];this.properties[s.name]=this.getSlotPropValue(e),t++}}}else if("decorate"===s.type){const t=this.config.props[s.name];t&&(this.properties[s.name]=this.composite.getNode(t))}else if("style"===s.type){const t=this.config.props[s.name],e=[];if(Array.isArray(t)){this.properties[s.name]=t.map((t=>{const[s,r]=t.split("/");return r?(this.composite.loader.confirmPackageDependencies(s),pt(r,e)):pt(t,e)}));for(const t of e)this.properties[s.name].push("has-pseudo-"+t)}}}}handleMouseOver(t){dt(t.target,"hover")}handleMouseOut(t){dt(t.target,"hover",!0)}clone(){const t=new mt({composite:this.composite,componentDefinition:this.componentDefinition,config:this.config});if(this.children){t.children=[];for(const e of this.children){const s=e.clone();s.parent=t,t.children.push(s)}}return t.isSlot=this.isSlot,t.parent=this.parent,t}invoke(t,e){if(this.renderer)return this.renderer.invoke(t,e)}hasMethod(t){return!!this.renderer&&this.renderer.hasMethod(t)}unmount(){this.isMounted=!1,this.renderer&&(this.renderer.destroy(),this.renderer=null)}}const gt=mt,yt=e()("ridge:composite"),bt=class extends lt{constructor({id:t,packageName:e,compositePath:s,properties:r,config:o,appPackageObject:n,context:i}){super(),this.id=t,this.config=o,this.compositePath=s,this.context=i,this.appPackageObject=n,this.loader=i.loader,this.packageName=e,this.properties=r||o.properties,this._hoveredElements=[]}async loadConfig(){this.config=await this.context.loadComposite(this.packageName,this.compositePath),null!=this.config&&this.config.elements||(this.config=null)}firstPaint(t){t&&(this.el=t),this.firstPainted=!0,this.updateStyle(),this.initializeNodes(),this.el.closest('[composite-id="'+this.getCompositeId()+'"]')!==this.el&&this.setStatus("Circular"),this.children=[];for(const t of this.config.children??[]){const e=this.getNode(t);if(e){const t=document.createElement("div");this.el.appendChild(t),e.parent=this,this.children.push(e),e.firstPaint(t)}}}initializeNodes(){this.nodes={};for(let t=0;t<this.config.elements.length;t++){const e=this.createElement(this.config.elements[t]);this.nodes[e.getId()]=e}this.initChildren(),this.events={},this.updatePromotedElement()}async initialize(){if(yt(this.packageName,this.compositePath,"initialize start"),this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath)),!this.config)return!1}async loadChildren(){const t=[];this.config||(this.config=await this.context.loadComposite(this.packageName,this.compositePath));for(const e of Object.values(this.nodes))t.push(await e.load());await Promise.allSettled(t)}getCompositeId(){return this.id||`${this.packageName??""}${this.compositePath}`}getNodes(t){const e=Object.values(this.nodes);return t?e.filter(t):e}getNode(t){return this.nodes[t]}getRootNode(t){return this.children.filter((e=>e.id===t))[0]}getBlobUrl(t){return this.context.getBlobUrl(t,this.packageName)}initChildren(){this.config.children?this.children=Array.from(new Set(this.config.children)).map((t=>this.nodes[t])).filter((t=>t)):this.children=Object.values(this.nodes).filter((t=>null==t.config.parent));for(const t of this.children)t.parent=this,t.initChildren()}createElement(t){return new gt({composite:this,config:t})}getJsModules(){return this.jsModules||[]}async mount(t,e){try{this.beforeMount&&this.beforeMount(t)}catch(t){}if(t&&(this.el=t,t.ridgeComposite&&t.ridgeComposite.unmount(),this.el.ridgeComposite=this),this.removeStatus(),yt(this.packageName,this.compositePath,"mounting"),this.config||(this.setStatus("Loading"),await this.loadConfig()),this.removeStatus("Loading"),!this.config)return this.setStatus("Page-not-found"),void(this.onPageNotFound&&this.onPageNotFound(this));if(this.firstPainted||this.firstPaint(),this.appPackageObject||(this.appPackageObject=await this.context.loadAppPackageJSON(this.packageName)),e&&(window.ridgeTheme={},this.appPackageObject.themes))for(const t of Object.keys(this.appPackageObject.themes))window.ridgeTheme[t]=this.appPackageObject.themes[t];yt("style updated"),await this.importJSFiles(),await this.loadStore(),yt(this.packageName,this.compositePath,"js imported"),this.emit("postMount"),this.postMount&&await this.postMount(),yt(this.packageName,this.compositePath,"mounting all root eles");const s=[];for(const t of this.children??[])s.push(t.mount());await Promise.allSettled(s),yt(this.packageName,this.compositePath,"mounted"),this.initializeEvents(),this.emit("mounted"),this.mounted&&this.mounted()}async mountRootComponents(){}unmount(){if(this.el.classList.remove("ridge-composite"),this.el.removeAttribute("composite-id"),this.config){const{classNames:t=[]}=this.config.style;delete this.el.style.background,t&&t.forEach((t=>{this.el.classList.remove(t)}));for(const t of this.children){const e=t.el;try{t.unmount()}catch(t){}e&&e.parentElement===this.el&&this.el.removeChild(e)}this.store&&this.store.destory()}this.el.removeEventListener("mouseover",this.handleMouseOver),this.el.removeEventListener("mouseout",this.handleMouseOut)}updateStyle(){if(this.el.classList.add("ridge-composite"),this.el.setAttribute("composite-id",this.getCompositeId()),this.config&&this.config.style&&this.el){this.el.style.background="",this.config.style.widthFix?(this.el.style.width=this.config.style.width+"px",this.el.style.overflowX="hidden"):this.el.style.width="100%",this.config.style.heightFix?(this.el.style.height=this.config.style.height+"px",this.el.style.overflowY="hidden"):this.el.style.height="100%";const{background:t,classNames:e=[]}=this.config.style;t&&Object.assign(this.el.style,{background:t}),e&&e.forEach((t=>{this.el.classList.add(t)}))}}updateChildStyle(t){if(t.el)if(t.config.full)t.el.classList.add("ridge-is-full"),t.el.style.transform="none",t.el.style.width="",t.el.style.height="";else{const e=t.config.style;t.el.classList.remove("ridge-is-full"),t.el.style.position="absolute",t.el.style.left=0,t.el.style.top=0,t.el.style.transform=`translate(${e.x}px, ${e.y}px)`,t.el.style.width=e.width?e.width+"px":"",t.el.style.height=e.height?e.height+"px":""}}getScopedData(){return[]}async importJSFiles(){const{jsFiles:t}=this.config,e=[];for(const s of t??[])try{const t=await this.context.loadModule(this.packageName,s);t&&(t.filePath=s,e.push(t))}catch(t){console.error("JS Module Load Fail: ",this.packageName+"/"+s)}this.jsModules=e}initializeEvents(){this.el.onclick=t=>{t.target===this.el&&this.emit("onClick",[t])}}handleMouseOver(t){if(this.currentHoverTarget=t.target,window.requestAnimationFrame((()=>{this.setHoveredElementClassList()})),t.target.contains(t.relatedTarget))return;const e=t.target.classList;for(let s=0;s<e.length;s++)if(e[s].startsWith("hover:")){const r=e[s].substring(6);t.target.classList.add(r)}}setHoveredElementClassList(t){for(const t of this._hoveredElements)this.setHoveredClassList(t,!0)}setHoveredClassList(t,e){const s=t.classList;let r=!1;for(let o=0;o<s.length;o++)if(s[o].startsWith("hover:")){r=!0;const n=s[o].substring(6);e?t.classList.remove(n):t.classList.add(n)}return r}handleInternalEventConfig(t,e){if(this.config.events&&this.config.events[t])for(const s of this.config.events[t])s.store&&s.method&&this.store.doStoreAction(s.store,s.method,{payload:e,eventArgs:s.payload})}on(t,e){this.events[t]=e}emit(t,e){this.handleInternalEventConfig(t,e),this.events[t]&&this.events[t](e??[]),this.properties[t]&&"function"==typeof this.properties[t]&&this.properties[t].call(null,e)}setProperties(t){this.properties=t,this.store&&this.store.setProperties(this.properties),this.updatePromotedElement()}updatePromotedElement(){if(this.nodes)for(const t of Object.values(this.nodes))for(const[e,s]of Object.entries(t.config.propEx||{}))if("string"==typeof s&&s.startsWith(st+"."+rt)){const[r,o,n]=s.split(".");this.properties[n]&&(t.config.props[e]=this.properties[n],t.forceUpdateProperty())}}async loadStore(){this.store=new nt(this);try{this.store.load(this.jsModules,this.properties)}catch(t){console.error("Store Load Fail: ",t)}}};window.createDebug=e();const vt=e()("ridge:context"),wt=React;var Ct=s.n(wt);window.Ridge=class{constructor({baseUrl:t,loadPropControl:e}){this.VERSION="1.2.0",this.baseUrl=t,vt("Ridge Runtime  Version:1.2.0, baseUrl:"+this.baseUrl);const s=new p({baseUrl:this.baseUrl,loadPropControl:e});this.loader=s,this.services={loader:s}}parseRidgePath(t){const e=t.split("/").filter((t=>t));if(e[0].startsWith("@")){if(e.length>=3){const[t,s,...r]=e;return{packageName:t+"/"+s,compositePath:r.join("/")}}return null}if(e.length>=2){const[t,...s]=e;return{packageName:t,compositePath:s.join("/")}}return null}createCompositeByPath(t,e={}){const s=this.parseRidgePath(t);return s?new bt({context:this,packageName:s.packageName,compositePath:s.compositePath,properties:e}):null}createComposite(t,e,s){try{return new bt({context:this,packageName:t,compositePath:e.startsWith("/")?e:"/"+e,properties:s})}catch(t){return console.error("createComposite error",t),null}}async loadComposite(t,e){if(e){const s=e.endsWith(".json")?e:e+".json";return this.loader.loadJSON(`${t}/${s}`)}{const e=t.endsWith(".json")?t:t+".json";return this.loader.loadJSON(e)}}getBlobUrl(t,e){return t.startsWith("http")||t.startsWith("data:")||t.startsWith("blob:")||t.startsWith("/")?t:t.startsWith("composite://")?e?this.baseUrl+"/"+e+t.substring(12):this.baseUrl+t.substring(12):this.baseUrl+"/"+t}async loadAppPackageJSON(t){return this.loader.getPackageJSON(t)}async loadModule(t,e){let s=(this.baseUrl+"/"+t+"/"+e).replace(/\/\//g,"/");return e.startsWith("composite://")?s=(this.baseUrl+"/"+t+"/"+e.substring(12)).replace(/\/\//g,"/"):e.startsWith("/")&&(s=(this.baseUrl+"/"+e).replace(/\/\//g,"/")),this.loader.loadStoreScript(s)}async loadScript(t){return this.loader.loadScript(t)}},window.RidgeCore={ReactComposite:({app:t,path:e,ridge:s,...r})=>{const o=(0,wt.useRef)(null);let n=s;return n||(n=globalThis.ridge),n?((0,wt.useEffect)((()=>{n.createComposite(t,e,r).mount(o.current)}),[t,e]),(0,wt.useEffect)((()=>{o.current.ridgeComposite&&o.current.ridgeComposite.setProperties(r)})),Ct().createElement("div",{ref:o,className:"composite-view",style:{width:"100%",height:"100%"}})):(console.error("请在页面引入ridgejs库"),Ct().createElement(Ct().Fragment,null,"请在页面引入ridgejs库"))}}})()})();